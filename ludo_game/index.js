System.register("chunks:///ludo_game.js",["cc","./rollupPluginModLoBabelHelpers-5eee144e.js","./colyseus.mjs_cjs=&original=-97b34c4b.js"],(function(){var e,t,n,i,o,r,a,s,l,c,u,p,h,d,m,f,g,y,v,b,S,C,_,T,w,P,O,N,E,R,I,A,D,M,L,F,k,G,z,H,U,B,x,W,V,K,j,J,Y,Q,Z;return{setters:[function(x){e=x.cclegacy,t=x.EventTarget,n=x._decorator,i=x.sys,o=x.Component,r=x.CCBoolean,a=x.UITransform,s=x.Camera,l=x.screen,c=x.view,u=x.math,p=x.director,h=x.Director,d=x.Widget,m=x.Enum,f=x.Size,g=x.Node,y=x.Vec3,v=x.CCString,b=x.AudioClip,S=x.CCFloat,C=x.AudioSource,_=x.Prefab,T=x.instantiate,w=x.SpriteFrame,P=x.Color,O=x.Sprite,N=x.CCInteger,E=x.Animation,R=x.tween,I=x.quat,A=x.Quat,D=x.ParticleSystem2D,M=x.Label,L=x.Tween,F=x.Input,k=x.assetManager,G=x.Texture2D,z=x.Layout,H=x.game,U=x.Game,B=x.log},function(e){x=e.h,W=e._,V=e.a,K=e.b,j=e.c,J=e.d,Y=e.f,Q=e.g},function(e){Z=e._}],execute:function(){e._RF.push({},"2515dEEksBBbIkGfK/2jOC0","defaultConfig",void 0);var q={gameId:"unknown-game",sdkVersion:"1.0.0",debug:!1};e._RF.pop(),e._RF.push({},"90e47P5RrtJtazkgUtsnNhj","WebViewTransport",void 0);var X=function(){function e(){}return e.prototype.send=function(e){var t;null==(t=window.ReactNativeWebView)||t.postMessage(JSON.stringify(e))},e}();e._RF.pop(),e._RF.push({},"1ba7eNqigRLxYaZfERtDqW8","index",void 0),e._RF.pop(),e._RF.push({},"fec3eH4YlRA7JU7ntc/LqR2","events",void 0);var $="MILO_GAME_LOADED",ee="MILO_GAME_STARTED",te="MILO_GAME_ENDED",ne="MILO_SCORE_UPDATE",ie="MILO_VIBRATE_PRESET",oe="MILO_VIBRATE_PATTERN",re="MILO_PLAY_AGAIN",ae="MILO_CHANGE_GAME",se=function(e){return e.HOST_CHANGED="HOST_CHANGED",e}({});e._RF.pop(),e._RF.push({},"4d65fqJBgZPP77M2bCxan4q","MiloGameSDK",void 0);var le=new t,ce=function(){function e(){this.transport=new X,this.config=x({},q),this.hostId=null}var t=e.prototype;return t.init=function(e){var t=this;e&&(this.config=x({},this.config,e)),this.config.debug&&console.log("[MiloGameSDK] initialized with",this.config),window.updateHostId=function(e){console.log("Received hostId from React Native:",e);var n=t.hostId;t.setHostId(e),n!==e&&le.emit(se.HOST_CHANGED,{oldHostId:n,newHostId:e})}},t.vibratePreset=function(e){var t={preset:e};this.sendEvent(ie,t)},t.vibratePattern=function(e){var t={pattern:e};this.sendEvent(oe,t)},t.gameLoaded=function(e){this.sendEvent($,e)},t.gameStarted=function(e){this.sendEvent(ee,e)},t.gameEnded=function(e){this.sendEvent(te,e)},t.sendScore=function(e){this.sendEvent(ne,e)},t.playAgain=function(e){this.sendEvent(re,e)},t.changeGame=function(e){this.sendEvent(ae,e)},t.sendEvent=function(e,t){var n={event:e,data:t,ts:Date.now(),gameId:this.config.gameId};this.transport.send(n)},t.getHostId=function(){return this.hostId},t.setHostId=function(e){this.hostId=e},e}();e._RF.pop(),e._RF.push({},"bfa26WUGKFAxZTBgLMLgP0T","utils",void 0),e._RF.pop(),e._RF.push({},"69798FTQmBDBKJai0ofMhrM","types",void 0),e._RF.pop(),e._RF.push({},"03337Y59GFDrKzWFCVCCT+Z","index",void 0),e._RF.pop(),e._RF.push({},"d45b8E884lEKK98VaIkyRL+","PBLogger",void 0);var ue,pe,he,de,me,fe,ge,ye,ve,be,Se,Ce,_e,Te,we,Pe,Oe,Ne=function(e){return e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e}({}),Ee=function(){function e(){}return e.debug=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.log(Ne.Debug,e,n)},e.info=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.log(Ne.Info,e,n)},e.warning=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.log(Ne.Warning,e,n)},e.error=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.log(Ne.Error,e,n)},e.log=function(e,t,n){if(e>=this.currentLevel){var i,o=Ne[e]+": "+t;if((i=console).log.apply(i,[o].concat(n)),this.isProduction&&window.ReactNativeWebView)try{var r={type:"log",level:Ne[e],message:o,params:n};window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify(r))}catch(e){console.error("Failed to send log to ReactNativeWebView:",e)}}},e.setLevel=function(e){this.currentLevel=e},e.setProductionMode=function(e){this.isProduction=e},e}();Ee.currentLevel=Ne.Debug,Ee.isProduction=!1,e._RF.pop(),e._RF.push({},"4422br4yNxBwYnV40Q/kNhv","NetworkConfig",void 0);var Re=n.ccclass,Ie=n.property,Ae=(ue=Re("NetworkConfig"),pe=Ie({tooltip:"Server host address"}),he=Ie({tooltip:"Server port number"}),de=Ie({tooltip:"Use SSL for connections"}),me=Ie({tooltip:"Player identifier"}),fe=Ie({tooltip:"Room identifier"}),ge=Ie({tooltip:"Name of the game"}),ye=Ie({tooltip:"Whether the data was assigned from query parameters"}),ue((Se=W((be=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"serverHost",Se,j(t)),K(t,"serverPort",Ce,j(t)),K(t,"useSSL",_e,j(t)),K(t,"userId",Te,j(t)),K(t,"roomId",we,j(t)),K(t,"gameName",Pe,j(t)),K(t,"assignedFromQueryParams",Oe,j(t)),t}V(t,e);var n=t.prototype;return n.parseQueryParams=function(){var e=this;if(Ee.debug("parseQueryParams"),i.isBrowser){var t=new URLSearchParams(window.location.search);Ee.debug("queryParams",t),this.updateConfigFromQueryParam(t,"userId",(function(t){Ee.debug("userId",t),e.userId=t,e.assignedFromQueryParams=!0})),this.updateConfigFromQueryParam(t,"roomId",(function(t){Ee.debug("roomId",t),e.roomId=t})),this.updateConfigFromQueryParam(t,"apiUrl",(function(t){e.serverHost=t})),this.updateConfigFromQueryParam(t,"apiPort",(function(t){var n=parseInt(t);isNaN(n)||(e.serverPort=n)})),this.updateConfigFromQueryParam(t,"useSSL",(function(t){e.useSSL="true"===t}))}},n.updateConfigFromQueryParam=function(e,t,n){var i=e.get(t);null!=i&&n(i)},t}(o)).prototype,"serverHost",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"localhost"}}),Ce=W(be.prototype,"serverPort",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2567}}),_e=W(be.prototype,"useSSL",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Te=W(be.prototype,"userId",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),we=W(be.prototype,"roomId",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"testroom1"}}),Pe=W(be.prototype,"gameName",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Pictionary"}}),Oe=W(be.prototype,"assignedFromQueryParams",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ve=be))||ve);e._RF.pop(),e._RF.push({},"79d56WMjvtAuY3k9iy37Xc7","NetworkTypes",void 0);var De=function(e){return e[e.SERVER_ROOM_STATE_CHANGE=0]="SERVER_ROOM_STATE_CHANGE",e[e.CONNECTION_STATE_CHANGE=1]="CONNECTION_STATE_CHANGE",e[e.ROOM_STATUS_CHANGE=2]="ROOM_STATUS_CHANGE",e[e.SERVER_MESSAGE=3]="SERVER_MESSAGE",e}({}),Me=function(e){return e[e.INITIALIZING=0]="INITIALIZING",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.LOBBY=3]="LOBBY",e[e.JOINED_ROOM=4]="JOINED_ROOM",e[e.DISCONNECTED=5]="DISCONNECTED",e[e.RECONNECTING=6]="RECONNECTING",e[e.KICKED_OUT=7]="KICKED_OUT",e}({}),Le=function(e){return e.NONE="none",e.KICKED_OUT="kicked_out",e.PLAYER_CAMEBACK="player_cameback",e.PLAYER_JOINED="player_joined",e}({});e._RF.pop(),e._RF.push({},"3d9c75LAEBNy5WLk64aupeg","PlayerTypes",void 0);var Fe,ke=function(e){return e[e.HUMAN=0]="HUMAN",e[e.BOT=1]="BOT",e[e.SPECTATOR=2]="SPECTATOR",e}({});e._RF.pop(),e._RF.push({},"f6c34yOsLdGLo0FwVeQXy4b","PbSaveSystem",void 0);var Ge,ze,He,Ue,Be,xe,We,Ve,Ke=(0,n.ccclass)("PbSaveSystem")(Fe=function(){function e(){}return e.SaveData=function(e,t){Ee.info("============ Saving data in pb save system ========="),i.localStorage.setItem(e,JSON.stringify(t))},e.LoadData=function(e){return JSON.parse(i.localStorage.getItem(e))},e.RemoveData=function(e){i.localStorage.removeItem(e)},e.ClearAllData=function(){i.localStorage.clear()},e}())||Fe;e._RF.pop(),e._RF.push({},"e8435hlDKhJjbs44qESB00u","NetworkManager",void 0);var je,Je,Ye,Qe,Ze,qe,Xe,$e,et,tt,nt,it,ot=n.ccclass,rt=n.property,at={roomId:"testroom1",reconnectionToken:"eyJ"},st=new t,lt=new t,ct=new t,ut=(Ge=ot("NetworkManager"),ze=rt({type:r,tooltip:"Enable development mode for additional logging"}),He=rt({type:Ae,tooltip:"Network configuration settings"}),Ge(((Ve=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"isDevMode",xe,j(t)),K(t,"networkConfig",We,j(t)),t._client=void 0,t._room=void 0,t._currentConnectionState=Me.INITIALIZING,t._reconnectionData=x({},at),t}V(t,e);var n=t.prototype;return n.onLoad=function(){if(t._instance)return this.log("NetworkManager instance already exists. Destroying duplicate."),void this.node.destroy();t._instance=this,this.networkConfig.parseQueryParams(),this.isDevMode||Ee.setProductionMode(!0)},n.start=function(){this.initializeClient(),Ee.info("============ Initializing client ========="),this.networkConfig.assignedFromQueryParams&&(Ee.info("============ Connecting to room ========="),this.connect(this.networkConfig.roomId,this.networkConfig.userId))},n.initializeClient=function(){var e=this.networkConfig.useSSL?"wss":"ws",t="";t=0==this.networkConfig.serverPort?e+"://"+this.networkConfig.serverHost:e+"://"+this.networkConfig.serverHost+":"+this.networkConfig.serverPort,this.log("Initializing client with endpoint: "+t),this._client=new Z.Client(t)},n.shouldRejoin=function(){return!this.isDevMode&&(this._reconnectionData=Ke.LoadData(this.networkConfig.gameName),!!(this._reconnectionData&&this._reconnectionData.roomId&&this._reconnectionData.reconnectionToken)&&this._reconnectionData.roomId===this.networkConfig.roomId)},n.connect=function(){var e=Y(Q().mark((function e(t,n){var i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ee.info("============ Connecting to room from connect function ========="),this.updateConnectionState(Me.CONNECTING),!this.shouldRejoin()){e.next=7;break}return this.log("Rejoining room",t),e.next=6,this.rejoin();case 6:return e.abrupt("return");case 7:return e.prev=7,i=this.createPlayerData(n),this.log("Joining with options ",{player:i}),e.next=12,this._client.joinById(t,{player:i});case 12:this._room=e.sent,this.initAfterJoin(t),e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(7),this.handleConnectionError(e.t0),e.t0;case 20:case"end":return e.stop()}}),e,this,[[7,16]])})));return function(t,n){return e.apply(this,arguments)}}(),n.initAfterJoin=function(e){this.updateConnectionState(Me.JOINED_ROOM),this.log("Joined room "+e+" with sessionId: "+this._room.sessionId),this.initializeRoomCallbacks(),this.saveReconnectionData()},n.createAndJoinRoom=function(){var e=Y(Q().mark((function e(t,n){var i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log("Creating room",t),this.updateConnectionState(Me.CONNECTING),e.prev=2,i=this.createPlayerData(n),e.next=6,this._client.create("PictionaryRoom",{roomId:t,player:i,roomSettings:{maxClients:10}});case 6:this._room=e.sent,this.initAfterJoin(t),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(2),this.handleConnectionError(e.t0),e.t0;case 14:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}(),n.createPlayerData=function(e){return{userId:e,name:e,avatar:"randomProfilePicture",type:ke.HUMAN}},n.initializeRoomCallbacks=function(){var e=this;console.log("============ Initializing room callbacks ========="),this._room?(this._room.onStateChange((function(e){lt.emit(De.SERVER_ROOM_STATE_CHANGE,e)})),this._room.onLeave((function(t){4001===t?e.updateConnectionState(Me.KICKED_OUT):e.updateConnectionState(Me.DISCONNECTED)})),this._room.onMessage(Le.KICKED_OUT,(function(){e.updateConnectionState(Me.KICKED_OUT)})),this._room.onMessage("*",(function(e,t){ct.emit(De.SERVER_MESSAGE,e,t)}))):this.log("Cannot initialize callbacks: Room is not defined")},n.updateConnectionState=function(e){if(this._currentConnectionState!==e){var t=this._currentConnectionState;this._currentConnectionState=e,this.log("Connection state changed: "+Me[t]+" -> "+Me[e]),st.emit(De.CONNECTION_STATE_CHANGE,t,e)}},n.reconnect=function(){var e=Y(Q().mark((function e(t,n,i){var o,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=1),void 0===n&&(n=10),void 0===i&&(i=2e3),this._currentConnectionState===Me.DISCONNECTED||this._currentConnectionState===Me.RECONNECTING){e.next=6;break}return this.log("Cannot reconnect: Current state is "+Me[this._currentConnectionState]),e.abrupt("return");case 6:return this._room&&this._room.state&&(o=this._room.state).roomSettings&&o.roomSettings.maxReconnectionAttempts&&(n=o.roomSettings.maxReconnectionAttempts),this.updateConnectionState(Me.RECONNECTING),this.log("Reconnect attempt "+t+"/"+n),e.prev=9,e.next=12,this.delay(i);case 12:if(this._room&&this._room.reconnectionToken){e.next=14;break}throw new Error("Reconnection token not available");case 14:return e.next=16,this._client.reconnect(this._room.reconnectionToken);case 16:r=e.sent,this._room=r,this.saveReconnectionData(),this.initializeRoomCallbacks(),this.updateConnectionState(Me.JOINED_ROOM),this.log("Reconnected successfully."),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(9),this.handleReconnectionError(e.t0,t,n,i);case 27:case"end":return e.stop()}}),e,this,[[9,24]])})));return function(t,n,i){return e.apply(this,arguments)}}(),n.rejoin=function(){var e=Y(Q().mark((function e(t,n,i){var o,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=1),void 0===n&&(n=10),void 0===i&&(i=2e3),this.log("Rejoin attempt "+t+"/"+n),e.prev=4,e.next=7,this.delay(i);case 7:if(this._reconnectionData&&this._reconnectionData.reconnectionToken){e.next=9;break}throw new Error("Reconnection data not available");case 9:return o=this._reconnectionData.roomId+":"+this._reconnectionData.reconnectionToken,Ee.info("Using formatted reconnection token: ",o),e.next=13,this._client.reconnect(o);case 13:r=e.sent,this._room=r,this.saveReconnectionData(),this.initializeRoomCallbacks(),this.updateConnectionState(Me.JOINED_ROOM),this.log("Rejoined successfully."),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(4),this.handleReconnectionError(e.t0,t,n,i,"reJoin");case 24:case"end":return e.stop()}}),e,this,[[4,21]])})));return function(t,n,i){return e.apply(this,arguments)}}(),n.delay=function(){var e=Y(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleConnectionError=function(e){var t=(null==e?void 0:e.message)||"Unknown error";this.log("Error connecting to room:",t),this.updateConnectionState(Me.DISCONNECTED)},n.handleReconnectionError=function(e,t,n,i,o){void 0===o&&(o="reconnect");var r=(null==e?void 0:e.message)||"Unknown error";this.log(o+" attempt "+t+" failed:",r),t<n||-1===n?"reconnect"===o?this.reconnect(t+1,n,i):this.rejoin(t+1,n,i):(this.log("Max reconnection attempts reached. Please check your network or contact support."),this.updateConnectionState(Me.DISCONNECTED))},n.saveReconnectionData=function(){if(Ee.info("============ Saving reconnection data ========="),this._room&&this._room.reconnectionToken){var e=this._room.reconnectionToken;e.includes(":")&&(e=e.split(":")[1]),Ee.info("saving Reconnection token: ",e),this._reconnectionData={roomId:this.networkConfig.roomId,reconnectionToken:e},Ke.SaveData(this.networkConfig.gameName,this._reconnectionData),Ee.info("Reconnection data saved")}else this.log("Cannot save reconnection data: Room or reconnection token not available")},n.leaveRoom=function(){var e=this;this._room?(this.log("Leaving room"),this._room.leave(!0).then((function(){return e.log("Left room successfully")})).catch((function(t){return e.log("Error leaving room:",(null==t?void 0:t.message)||"Unknown error")}))):this.log("Cannot leave room: Room is not defined")},n.getMySessionId=function(){return this._room.sessionId},n.sendMessage=function(e,t){this._room?(this.isDevMode&&this.log("Sending message:",e,t),this._room.send(e,t)):this.log("Cannot send message: Room is not defined")},n.log=function(e){if(this.isDevMode){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.length>0?Ee.info.apply(Ee,["[NetworkManager] "+e].concat(n)):Ee.info("[NetworkManager] "+e)}},J(t,[{key:"CurrentRoom",get:function(){return this._room}},{key:"CurrentConnectionState",get:function(){return this._currentConnectionState}}],[{key:"Instance",get:function(){if(!this._instance)throw new Error("NetworkManager instance is not initialized.");return this._instance}}]),t}(o))._instance=null,xe=W((Be=Ve).prototype,"isDevMode",[ze],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),We=W(Be.prototype,"networkConfig",[He],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=Be))||Ue);e._RF.pop(),e._RF.push({},"94ecf8pDQ1JLZcfNHR6bTtx","CameraManger",void 0);var pt=n.ccclass,ht=n.property,dt=n.executionOrder,mt=new t;dt(-100);var ft,gt,yt,vt,bt,St=(je=pt("CameraManger"),Je=ht({type:a}),je(((it=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"canvasUITransform",Ze,j(t)),K(t,"designHeight",qe,j(t)),K(t,"designWidth",Xe,j(t)),K(t,"defaultOrthoHeight",$e,j(t)),K(t,"minOrthoHeight",et,j(t)),K(t,"maxOrthoHeight",tt,j(t)),K(t,"safeAreaPadding",nt,j(t)),t.designAspectRatio=void 0,t.currentAspectRatio=void 0,t.camera=null,t.windowWidth=1080,t.windowHeight=1920,t.effectiveWidth=0,t.effectiveHeight=0,t.effectiveAspectRatio=0,t}V(t,e);var n=t.prototype;return n.onLoad=function(){console.log("CameraManger onLoad"),t.instance=this,this.designAspectRatio=this.designWidth/this.designHeight,this.camera=this.node.getComponent(s)},n.start=function(){var e=this;this.updateScreenSize(),this.adaptCameraToScreen(),window.addEventListener("resize",(function(){e.updateScreenSize(),e.adaptCameraToScreen()}))},n.updateScreenSize=function(){this.windowWidth=l.windowSize.width||window.innerWidth,this.windowHeight=l.windowSize.height||window.innerHeight,this.currentAspectRatio=this.windowWidth/this.windowHeight,console.log("Window Size: "+this.windowWidth+"x"+this.windowHeight+", Aspect Ratio: "+this.currentAspectRatio.toFixed(2))},n.adaptCameraToScreen=function(){if(this.camera){var e=0,t=0,n=0,o=0;if(i.os===i.OS.IOS||i.os===i.OS.ANDROID){var r=c.getVisibleSize(),a=c.getVisibleOrigin();r&&(e=a.y,t=this.windowHeight-(a.y+r.height),n=a.x,o=this.windowWidth-(a.x+r.width))}this.effectiveHeight=this.windowHeight-e-t-2*this.safeAreaPadding,this.effectiveWidth=this.windowWidth-n-o-2*this.safeAreaPadding,this.effectiveAspectRatio=this.effectiveWidth/this.effectiveHeight,console.log("Effective Size: "+this.effectiveWidth+"x"+this.effectiveHeight+", Aspect Ratio: "+this.effectiveAspectRatio.toFixed(2));var s=this.currentAspectRatio>=1,l=this.defaultOrthoHeight;if(s)console.log("=== Landscape Mode ==="),l=this.defaultOrthoHeight*(1/this.currentAspectRatio)*1.5;else{console.log("=== Portrait Mode ===");var p=.6/Math.min(this.currentAspectRatio,.6);l=this.defaultOrthoHeight*p}l=u.clamp(l,this.minOrthoHeight,this.maxOrthoHeight),this.camera.orthoHeight=l,console.log("Camera Ortho Height: "+l.toFixed(2)),mt.emit("CameraOrthoSizeChange",l)}},n.getWidth=function(){return 2*this.camera.orthoHeight*this.currentAspectRatio},n.getCurrentOrthoHeight=function(){return this.camera.orthoHeight},n.refreshCameraAdaptation=function(){this.updateScreenSize(),this.adaptCameraToScreen()},t}(o)).instance=null,Ze=W((Qe=it).prototype,"canvasUITransform",[Je],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qe=W(Qe.prototype,"designHeight",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1920}}),Xe=W(Qe.prototype,"designWidth",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1080}}),$e=W(Qe.prototype,"defaultOrthoHeight",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 820}}),et=W(Qe.prototype,"minOrthoHeight",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 750}}),tt=W(Qe.prototype,"maxOrthoHeight",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1080}}),nt=W(Qe.prototype,"safeAreaPadding",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Ye=Qe))||Ye);e._RF.pop(),e._RF.push({},"1f3b2V57iZPHKE7ELzb3c0h","FitToScreen",void 0);var Ct,_t,Tt,wt,Pt,Ot,Nt,Et,Rt,It,At,Dt,Mt,Lt,Ft,kt=n.ccclass,Gt=n.property;ft=kt("FitToScreen"),gt=Gt({type:r}),ft((bt=W((vt=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"updateWidgetsRecursively",bt,j(t)),t}V(t,e);var n=t.prototype;return n.onEnable=function(){var e=this;p.once(h.EVENT_AFTER_UPDATE,(function(){e.refresh()}))},n.setUiTransformToScreenSize=function(){var e=this.node.getComponent(a),t=St.instance.getCurrentOrthoHeight()/St.instance.defaultOrthoHeight,n=l.windowSize.width||window.innerWidth,i=l.windowSize.height||window.innerHeight,o=St.instance.designHeight*t,r=o*n/i;console.log("windowWidth",n,"windowHeight",i),e.setContentSize(r,o)},n.refresh=function(){this.setUiTransformToScreenSize(),this.updateWidgetsRecursively&&this.updateWidgetsInHierarchy()},n.updateWidgetsInHierarchy=function(){this.updateWidgetAndDescendants(this.node)},n.updateWidgetAndDescendants=function(e){var t=this,n=e.getComponent(d);n&&this.node.uuid!=e.uuid&&n.updateAlignment(),e.children.forEach((function(e){t.updateWidgetAndDescendants(e)}))},t}(o)).prototype,"updateWidgetsRecursively",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt=vt));e._RF.pop(),e._RF.push({},"979a4jKolVNZLA2I5rryIl7","MiloLayout",void 0);var zt=n.ccclass,Ht=n.property,Ut=function(e){return e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL",e[e.GRID=2]="GRID",e}({}),Bt=function(e){return e[e.LEFT_TOP=0]="LEFT_TOP",e[e.CENTER_TOP=1]="CENTER_TOP",e[e.RIGHT_TOP=2]="RIGHT_TOP",e[e.LEFT_CENTER=3]="LEFT_CENTER",e[e.CENTER=4]="CENTER",e[e.RIGHT_CENTER=5]="RIGHT_CENTER",e[e.LEFT_BOTTOM=6]="LEFT_BOTTOM",e[e.CENTER_BOTTOM=7]="CENTER_BOTTOM",e[e.RIGHT_BOTTOM=8]="RIGHT_BOTTOM",e}({});Ct=zt("MiloLayout"),_t=Ht({type:m(Ut)}),Tt=Ht({type:m(Ut)}),wt=Ht({type:m(Bt)}),Pt=Ht({type:m(Bt)}),Ot=Ht({visible:function(){return this._layoutType===Ut.GRID}}),Ct((Rt=W((Et=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"_layoutType",Rt,j(t)),K(t,"_alignment",It,j(t)),K(t,"_spacingX",At,j(t)),K(t,"_spacingY",Dt,j(t)),K(t,"_columns",Mt,j(t)),K(t,"_padding",Lt,j(t)),K(t,"_autoResize",Ft,j(t)),t._activeChildCount=0,t._layoutSize=new f(0,0),t._lastChildActiveState=[],t}V(t,e);var n=t.prototype;return n.onLoad=function(){this.node.on(g.EventType.CHILD_ADDED,this.onChildAdded,this),this.node.on(g.EventType.CHILD_REMOVED,this.onChildRemoved,this)},n.onDestroy=function(){this.node.off(g.EventType.CHILD_ADDED,this.onChildAdded,this),this.node.off(g.EventType.CHILD_REMOVED,this.onChildRemoved,this),this.removeAllChildListeners()},n.onChildRemoved=function(e){this.removeChildListener(e),this.updateLayout()},n.removeAllChildListeners=function(){var e=this;this.node.children.forEach((function(t){e.removeChildListener(t)}))},n.removeChildListener=function(e){e.__miloLayoutActiveHandler&&(e.off(g.EventType.ACTIVE_IN_HIERARCHY_CHANGED,e.__miloLayoutActiveHandler),e.__miloLayoutActiveHandler=null)},n.start=function(){this._lastChildActiveState=this.node.children.map((function(e){return e.active})),this.updateLayout(),this.addChildActiveListeners()},n.addChildActiveListeners=function(){var e=this;this.node.children.forEach((function(t){e.addChildActiveListener(t)}))},n.addChildActiveListener=function(e){var t=this;e.off(g.EventType.ACTIVE_IN_HIERARCHY_CHANGED,this.onChildActiveChanged,this);var n=function(){t.scheduleOnce((function(){t.updateLayout()}),0)};e.__miloLayoutActiveHandler=n,e.on(g.EventType.ACTIVE_IN_HIERARCHY_CHANGED,n)},n.onChildActiveChanged=function(e){},n.onEnable=function(){this.updateLayout()},n.getAlignmentOffset=function(e){var t,n=new y,i=(null==(t=this.node.getComponent(a))?void 0:t.contentSize)||new f(0,0);switch(this._alignment){case Bt.LEFT_TOP:case Bt.LEFT_CENTER:case Bt.LEFT_BOTTOM:n.x=this._padding;break;case Bt.CENTER_TOP:case Bt.CENTER:case Bt.CENTER_BOTTOM:n.x=(i.width-e.width)/2;break;case Bt.RIGHT_TOP:case Bt.RIGHT_CENTER:case Bt.RIGHT_BOTTOM:n.x=i.width-e.width-this._padding}switch(this._alignment){case Bt.LEFT_TOP:case Bt.CENTER_TOP:case Bt.RIGHT_TOP:n.y=-this._padding;break;case Bt.LEFT_CENTER:case Bt.CENTER:case Bt.RIGHT_CENTER:n.y=-(i.height-e.height)/2;break;case Bt.LEFT_BOTTOM:case Bt.CENTER_BOTTOM:case Bt.RIGHT_BOTTOM:n.y=-i.height+e.height+this._padding}return n},n.updateLayout=function(){if(this.node){var e=this.node.children.filter((function(e){return e.active}));if(this._activeChildCount=e.length,0!==this._activeChildCount)switch(this._layoutType){case Ut.HORIZONTAL:this.updateHorizontalLayout(e);break;case Ut.VERTICAL:this.updateVerticalLayout(e);break;case Ut.GRID:this.updateGridLayout(e)}}},n.updateHorizontalLayout=function(e){var t=this,n=2*this._padding,i=0;e.forEach((function(o,r){var s=o.getComponent(a);s&&(n+=s.width,r<e.length-1&&(n+=t._spacingX),i=Math.max(i,s.height))}));var o=new f(n,i+2*this._padding),r=this.getAlignmentOffset(o),s=r.x;if(e.forEach((function(e){var n=e.getComponent(a);if(n){var o=n.height,l=n.width,c=r.y;switch(t._alignment){case Bt.LEFT_TOP:case Bt.CENTER_TOP:case Bt.RIGHT_TOP:c=r.y-t._padding;break;case Bt.LEFT_CENTER:case Bt.CENTER:case Bt.RIGHT_CENTER:c=r.y-(i-o)/2;break;case Bt.LEFT_BOTTOM:case Bt.CENTER_BOTTOM:case Bt.RIGHT_BOTTOM:c=r.y-i+o}e.position=new y(s+l/2,c-o/2,0),s+=l+t._spacingX}})),this._layoutSize=o,this._autoResize){var l=this.node.getComponent(a);l&&l.setContentSize(o)}},n.updateVerticalLayout=function(e){var t=this,n=2*this._padding,i=0;e.forEach((function(o,r){var s=o.getComponent(a);s&&(n+=s.height,r<e.length-1&&(n+=t._spacingY),i=Math.max(i,s.width))}));var o=new f(i+2*this._padding,n),r=this.getAlignmentOffset(o),s=r.y;if(e.forEach((function(e){var n=e.getComponent(a);if(n){var o=n.height,l=n.width,c=r.x;switch(t._alignment){case Bt.LEFT_TOP:case Bt.LEFT_CENTER:case Bt.LEFT_BOTTOM:c=r.x+t._padding;break;case Bt.CENTER_TOP:case Bt.CENTER:case Bt.CENTER_BOTTOM:c=r.x+(i-l)/2+t._padding;break;case Bt.RIGHT_TOP:case Bt.RIGHT_CENTER:case Bt.RIGHT_BOTTOM:c=r.x+i-l+t._padding}e.position=new y(c+l/2,s-o/2,0),s-=o+t._spacingY}})),this._layoutSize=o,this._autoResize){var l=this.node.getComponent(a);l&&l.setContentSize(o)}},n.updateGridLayout=function(e){if(!(this._columns<=0)){var t=Math.ceil(e.length/this._columns),n=0,i=0;e.forEach((function(e){var t=e.getComponent(a);t&&(n=Math.max(n,t.width),i=Math.max(i,t.height))}));for(var o=2*this._padding+n*this._columns+this._spacingX*(this._columns-1),r=2*this._padding+i*t+this._spacingY*(t-1),s=new f(o,r),l=this.getAlignmentOffset(s),c=0;c<t;c++){var u=Math.min(this._columns,e.length-c*this._columns),p=u*n+(u-1)*this._spacingX,h=0;switch(this._alignment){case Bt.CENTER_TOP:case Bt.CENTER:case Bt.CENTER_BOTTOM:h=(this._columns*n+(this._columns-1)*this._spacingX-p)/2;break;case Bt.RIGHT_TOP:case Bt.RIGHT_CENTER:case Bt.RIGHT_BOTTOM:h=this._columns*n+(this._columns-1)*this._spacingX-p}for(var d=0;d<u;d++){var m=c*this._columns+d;if(m>=e.length)break;var g=e[m],v=g.getComponent(a);if(v){var b=v.width,S=v.height,C=l.x+this._padding+d*(n+this._spacingX)+h,_=l.y-this._padding-c*(i+this._spacingY),T=C,w=_;switch(this._alignment){case Bt.LEFT_TOP:case Bt.LEFT_CENTER:case Bt.LEFT_BOTTOM:T=C;break;case Bt.CENTER_TOP:case Bt.CENTER:case Bt.CENTER_BOTTOM:T=C+(n-b)/2;break;case Bt.RIGHT_TOP:case Bt.RIGHT_CENTER:case Bt.RIGHT_BOTTOM:T=C+n-b}switch(this._alignment){case Bt.LEFT_TOP:case Bt.CENTER_TOP:case Bt.RIGHT_TOP:w=_;break;case Bt.LEFT_CENTER:case Bt.CENTER:case Bt.RIGHT_CENTER:w=_-(i-S)/2;break;case Bt.LEFT_BOTTOM:case Bt.CENTER_BOTTOM:case Bt.RIGHT_BOTTOM:w=_-i+S}g.position=new y(T+b/2,w-S/2,0)}}}if(this._layoutSize=s,this._autoResize){var P=this.node.getComponent(a);P&&P.setContentSize(s)}}},n.update=function(e){if(this.node&&this.node.children.length>0){var t=this.node.children.map((function(e){return e.active})),n=!1;if(this._lastChildActiveState.length!==t.length)n=!0;else for(var i=0;i<t.length;i++)if(this._lastChildActiveState[i]!==t[i]){n=!0;break}n&&(this._lastChildActiveState=t,this.updateLayout())}},n.onChildAdded=function(e){this.addChildActiveListener(e),this.updateLayout()},J(t,[{key:"layoutType",get:function(){return this._layoutType},set:function(e){this._layoutType=e,this.updateLayout()}},{key:"alignment",get:function(){return this._alignment},set:function(e){this._alignment=e,this.updateLayout()}},{key:"spacingX",get:function(){return this._spacingX},set:function(e){this._spacingX=e,this.updateLayout()}},{key:"spacingY",get:function(){return this._spacingY},set:function(e){this._spacingY=e,this.updateLayout()}},{key:"columns",get:function(){return this._columns},set:function(e){this._columns=e,this.updateLayout()}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding=e,this.updateLayout()}},{key:"autoResize",get:function(){return this._autoResize},set:function(e){this._autoResize=e,this.updateLayout()}}]),t}(o)).prototype,"_layoutType",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ut.HORIZONTAL}}),W(Et.prototype,"layoutType",[Tt],Object.getOwnPropertyDescriptor(Et.prototype,"layoutType"),Et.prototype),It=W(Et.prototype,"_alignment",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Bt.LEFT_TOP}}),W(Et.prototype,"alignment",[Pt],Object.getOwnPropertyDescriptor(Et.prototype,"alignment"),Et.prototype),At=W(Et.prototype,"_spacingX",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),W(Et.prototype,"spacingX",[Ht],Object.getOwnPropertyDescriptor(Et.prototype,"spacingX"),Et.prototype),Dt=W(Et.prototype,"_spacingY",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),W(Et.prototype,"spacingY",[Ht],Object.getOwnPropertyDescriptor(Et.prototype,"spacingY"),Et.prototype),Mt=W(Et.prototype,"_columns",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),W(Et.prototype,"columns",[Ot],Object.getOwnPropertyDescriptor(Et.prototype,"columns"),Et.prototype),Lt=W(Et.prototype,"_padding",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W(Et.prototype,"padding",[Ht],Object.getOwnPropertyDescriptor(Et.prototype,"padding"),Et.prototype),Ft=W(Et.prototype,"_autoResize",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),W(Et.prototype,"autoResize",[Ht],Object.getOwnPropertyDescriptor(Et.prototype,"autoResize"),Et.prototype),Nt=Et));e._RF.pop(),e._RF.push({},"739f4Ds2mlKl7XzQIfGtoNG","PbExtensions",void 0),y.prototype.clampMagnitude=function(e,t){if(!(e>t)){var n=this.length();return n>t?(this.normalize(),this.multiplyScalar(t)):n<e&&(this.normalize(),this.multiplyScalar(e)),this}console.error("min should be less than max")},o.prototype.log=function(){for(var e=this.constructor.name,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];Ee.info.apply(Ee,[e+" "].concat(n))},e._RF.pop(),e._RF.push({},"ea7ddEiC8hE97wmd56CbyPj","Utils",void 0),e._RF.pop(),e._RF.push({},"d7a3amKvolMyI5gqGkvIl7L","BasePlayerData",void 0);var xt=function(){function e(){this.userId=void 0,this.name=void 0,this.avatar=void 0,this.sessionId=void 0,this.playerNumber=void 0,this.type=void 0,this.isOnline=void 0,this.isConnected=void 0,this.isReplacedByBot=void 0,this.isKickedOut=void 0,this.isReady=void 0,this.score=void 0}return e.prototype.copyFrom=function(e){this.userId=e.userId,this.name=e.name,this.avatar=e.avatar,this.sessionId=e.sessionId,this.playerNumber=e.playerNumber,this.type=e.type,this.isOnline=e.isOnline,this.isConnected=e.isConnected,this.isReplacedByBot=e.isReplacedByBot,this.isKickedOut=e.isKickedOut,this.isReady=e.isReady,this.score=e.score},e}();e._RF.pop(),e._RF.push({},"61da0bgjDpDQbwKWCVsJKAf","BaseRoomSettings",void 0);var Wt=function(){function e(){this.maxPlayers=void 0,this.minPlayers=void 0,this.maxClients=void 0,this.countdownTimeInSeconds=void 0,this.allowLateJoin=void 0,this.maxReconnectionAttempts=void 0,this.reconnectionAttemptInterval=void 0,this.reconnectionTime=void 0,this.gameFPS=void 0,this.serverFPS=void 0,this.patchRate=void 0}return e.prototype.copyFrom=function(e){this.maxPlayers=e.maxPlayers,this.minPlayers=e.minPlayers,this.maxClients=e.maxClients,this.countdownTimeInSeconds=e.countdownTimeInSeconds,this.allowLateJoin=e.allowLateJoin,this.reconnectionTime=e.reconnectionTime,this.gameFPS=e.gameFPS,this.serverFPS=e.serverFPS,this.patchRate=e.patchRate},e}();e._RF.pop(),e._RF.push({},"0a64biAvhFDNrUC3SreS+V8","RoomTypes",void 0);var Vt=function(e){return e[e.NONE=0]="NONE",e[e.WAITING_FOR_PLAYERS=1]="WAITING_FOR_PLAYERS",e[e.COUNTDOWN=2]="COUNTDOWN",e[e.GAME_SIMULATION=3]="GAME_SIMULATION",e[e.END_GAME=4]="END_GAME",e[e.KICKED_OUT=5]="KICKED_OUT",e}({});e._RF.pop(),e._RF.push({},"7d2abA46UhHJrgrJWovcce8","BaseRoomState",void 0);var Kt,jt,Jt,Yt,Qt,Zt,qt,Xt,$t,en,tn,nn,on,rn,an,sn,ln,cn,un,pn,hn,dn,mn,fn=function(){function e(e,t){this.currentRoomStatus=Vt.WAITING_FOR_PLAYERS,this.previousRoomStatus=Vt.NONE,this.roomSettings=void 0,this.playersData=void 0,this.spectatorsData=void 0,this.roomSettings=e,this.playersData=t,this.spectatorsData=[]}return e.prototype.copyFrom=function(e){this.currentRoomStatus=e.currentRoomStatus,this.previousRoomStatus=e.previousRoomStatus,this.roomSettings.copyFrom(e.roomSettings)},e}();e._RF.pop(),e._RF.push({},"0f385N0KNhPJrg43zxZPDkv","AudioManager",void 0);var gn=n.ccclass,yn=n.property,vn=(Kt=gn("AudioClipData"),jt=yn({type:v}),Jt=yn({type:b}),Yt=yn({type:S}),Qt=yn({type:S}),Zt=yn({type:r}),Kt(($t=W((Xt=function(){function e(){K(this,"name",$t,this),K(this,"audioClips",en,this),K(this,"delayBetweenClips",tn,this),K(this,"volume",nn,this),K(this,"loop",on,this),this.isLoopPlaying=void 0,this.lastPlayedTime=0,this.clipIndex=0}var t=e.prototype;return t.GetClip=function(){var e=this.audioClips[this.clipIndex];if(this.clipIndex=(this.clipIndex+1)%this.audioClips.length,this.CanPlay())return this.lastPlayedTime=Date.now(),e},t.CanPlay=function(){return Date.now()-this.lastPlayedTime>1e3*this.delayBetweenClips},e}()).prototype,"name",[jt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),en=W(Xt.prototype,"audioClips",[Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),tn=W(Xt.prototype,"delayBetweenClips",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),nn=W(Xt.prototype,"volume",[Qt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),on=W(Xt.prototype,"loop",[Zt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qt=Xt))||qt),bn=(rn=gn("AudioManager"),an=yn({type:vn}),sn=yn({type:C}),ln=yn({type:_}),rn(((mn=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"audioClipData",pn,j(t)),K(t,"backgroundAudioSource",hn,j(t)),t.localStorageAudioEnabledKey="LudoAudioEnabled",K(t,"audioSourcePrefab",dn,j(t)),t.audioSources=[],t._isAudioEnabled="true",t}V(t,e);var n=t.prototype;return n.onLoad=function(){t.instance=this,this.ReadAudioEnabledFromLocalStorage()},n.start=function(){this.SetAudioEnabled(this.IsAudioEnabled)},n.playSound=function(e){if("false"!=this.IsAudioEnabled){var t=this.audioClipData.find((function(t){return t.name==e}));if(null!=t){var n=t.GetClip();if(n){if(t.isLoopPlaying)return;var i=this.getEmptyAudioSource();i.loop=t.loop,t.isLoopPlaying=t.loop,i.volume=t.volume,i.clip=n,t.loop?i.play():i.playOneShot(n)}else console.warn("Audio Clip is in use ",e)}}},n.stopSound=function(e){var t=this.audioClipData.find((function(t){return t.name==e}));t?this.audioSources.forEach((function(e){e.clip==t.audioClips[t.clipIndex]&&(t.isLoopPlaying=!1,e.stop())})):console.warn("Audio Clip not found for ",e)},n.stopAllSounds=function(){this.audioSources.forEach((function(e){e.stop()})),this.audioClipData.forEach((function(e){e.isLoopPlaying=!1}))},n.ToggleAudio=function(){"true"==this.IsAudioEnabled?this.SetAudioEnabled("false"):this.SetAudioEnabled("true")},n.SetAudioEnabled=function(e){this._isAudioEnabled=e,this.UpdateBackgroundMusic(),this.WriteAudioEnabledToLocalStorage()},n.WriteAudioEnabledToLocalStorage=function(){i.localStorage.setItem(this.localStorageAudioEnabledKey,this.IsAudioEnabled)},n.ReadAudioEnabledFromLocalStorage=function(){var e=i.localStorage.getItem(this.localStorageAudioEnabledKey);this._isAudioEnabled=null==e?"true":e},n.UpdateBackgroundMusic=function(){var e,t;"true"==this.IsAudioEnabled?null==(e=this.backgroundAudioSource)||e.play():null==(t=this.backgroundAudioSource)||t.stop()},n.printAllPlayingAudioSources=function(){this.audioSources.forEach((function(e){e.playing&&console.log("Playing audio source: ",e.playing,e.clip.name,e.uuid)}))},n.getEmptyAudioSource=function(){var e=this.audioSources.find((function(e){return!e.playing}));return null==e&&(e=this.createAudioSource()),e},n.createAudioSource=function(){var e=T(this.audioSourcePrefab).getComponent(C);return e.node.setParent(this.node),this.audioSources.push(e),console.log("==== Created new audio source: ",this.audioSources.length),e},J(t,[{key:"IsAudioEnabled",get:function(){return this._isAudioEnabled}}]),t}(o)).instance=null,pn=W((un=mn).prototype,"audioClipData",[an],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),hn=W(un.prototype,"backgroundAudioSource",[sn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dn=W(un.prototype,"audioSourcePrefab",[ln],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cn=un))||cn);e._RF.pop(),e._RF.push({},"06061u9+jNG7awHQs5t9HDc","Defines",void 0);var Sn,Cn,_n,Tn,wn,Pn,On,Nn,En,Rn,In,An,Dn,Mn,Ln,Fn,kn,Gn,zn,Hn,Un,Bn,xn,Wn,Vn,Kn,jn,Jn,Yn,Qn,Zn,qn,Xn=function(e){return e[e.NONE=0]="NONE",e[e.ROLLING=1]="ROLLING",e[e.MOVING_PIECE=2]="MOVING_PIECE",e[e.END_TURN=3]="END_TURN",e[e.ROLLING_ACK=4]="ROLLING_ACK",e[e.MOVING_PIECE_ACK=5]="MOVING_PIECE_ACK",e}({}),$n=function(e){return e.NONE="none",e.SET_STATE="set_state",e.DICE_OUTCOME="dice_outcome",e.CLIENT_DICE_ROLL="client_dice_roll",e.MOVE_PIECE="move_piece",e.ROLLING_ACK="rolling_ack",e.MOVE_PIECE_ACK="move_piece_ack",e.WAITING_ACK="waiting_ack",e}({}),ei=function(e){return e[e.DEFAULT=1]="DEFAULT",e[e.SAFE=2]="SAFE",e[e.GOLDEN_DICE=4]="GOLDEN_DICE",e[e.BOMB=8]="BOMB",e[e.PROPELLER=16]="PROPELLER",e}({});e._RF.pop(),e._RF.push({},"f5f5aO2XbFDfIu1+izirTNu","PlayerAssets",void 0);var ti,ni=n.ccclass,ii=n.property,oi=(Sn=ni("PlayerAssets"),Cn=ii({type:w}),_n=ii({type:P}),Tn=ii({type:P}),wn=ii({type:w}),Pn=ii({type:w}),On=ii({type:_}),Nn=ii({type:_}),En=ii({type:w}),Rn=ii({type:w}),In=ii({type:w}),An=ii({type:_}),Dn=ii({type:[w]}),Mn=ii({type:_}),Ln=ii({type:_}),Sn(((qn=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"pawnSprites",Gn,j(t)),K(t,"pawnColors",zn,j(t)),K(t,"DiceBgColors",Hn,j(t)),K(t,"profileNamePlateSprite",Un,j(t)),K(t,"homeBaseSprite",Bn,j(t)),K(t,"pawnPrefab",xn,j(t)),K(t,"basePrefab",Wn,j(t)),K(t,"diceOutComeSprites",Vn,j(t)),K(t,"diceOutComesStackSprites",Kn,j(t)),K(t,"goldenDiceOutComeSprite",jn,j(t)),K(t,"moveOptionsUI",Jn,j(t)),K(t,"powerUpSprites",Yn,j(t)),K(t,"powerUpPrefab",Qn,j(t)),K(t,"bombBlastEffectPrefab",Zn,j(t)),t}V(t,e);var n=t.prototype;return n.onLoad=function(){t.instance=this},n.getPawnSprite=function(e){return this.pawnSprites[e]},n.getProfileNamePlateSprite=function(e){return this.profileNamePlateSprite[e]},n.getHomeBaseSprite=function(e){return this.homeBaseSprite[e]},n.getDiceOutComeSprite=function(e){return this.diceOutComeSprites[e]},n.getDiceOutComesStackSprite=function(e){return this.diceOutComesStackSprites[e]},n.getGoldenDiceOutComeSprite=function(){return this.goldenDiceOutComeSprite},n.getPowerUpSprite=function(e){var t=e&ei.GOLDEN_DICE,n=e&ei.BOMB,i=e&ei.PROPELLER;return t?this.powerUpSprites[0]:n?this.powerUpSprites[1]:i?this.powerUpSprites[2]:void 0},n.getPawnColor=function(e){return this.pawnColors[e]},n.getDiceBgColor=function(e){return P.WHITE.clone()},t}(o)).instance=null,Gn=W((kn=qn).prototype,"pawnSprites",[Cn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),zn=W(kn.prototype,"pawnColors",[_n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Hn=W(kn.prototype,"DiceBgColors",[Tn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Un=W(kn.prototype,"profileNamePlateSprite",[wn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Bn=W(kn.prototype,"homeBaseSprite",[Pn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),xn=W(kn.prototype,"pawnPrefab",[On],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wn=W(kn.prototype,"basePrefab",[Nn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vn=W(kn.prototype,"diceOutComeSprites",[En],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Kn=W(kn.prototype,"diceOutComesStackSprites",[Rn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),jn=W(kn.prototype,"goldenDiceOutComeSprite",[In],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jn=W(kn.prototype,"moveOptionsUI",[An],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yn=W(kn.prototype,"powerUpSprites",[Dn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Qn=W(kn.prototype,"powerUpPrefab",[Mn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zn=W(kn.prototype,"bombBlastEffectPrefab",[Ln],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fn=kn))||Fn);e._RF.pop(),e._RF.push({},"edc5aHKGhdAkoy2I1EQKGo+","Pooler",void 0);var ri,ai,si=n.ccclass,li=(n.property,si("Pooler")(ti=function(){function e(e){this.poolName="NodePool",this.pooledObjects=[],this.objectPrefab=null,this.pooledObjectCount=0,this.tempNode=null,this.poolName=e}var t=e.prototype;return t.getObject=function(){return this.pooledObjects.length>0?(this.tempNode=this.pooledObjects.pop(),this.tempNode.active=!0,this.tempNode):this.createObject()},t.returnObject=function(e){this.pooledObjects.push(e),e.active=!1},t.createObject=function(){this.pooledObjectCount++;var e=T(this.objectPrefab);return e.name=this.poolName+" "+this.pooledObjectCount,console.log("Creating new object for pool "+this.poolName),e},e}())||ti);e._RF.pop(),e._RF.push({},"96c5aupZSFFEKhd+4xivPri","PoolManager",void 0);var ci,ui,pi,hi,di,mi,fi,gi,yi,vi,bi,Si,Ci,_i,Ti,wi=n.ccclass,Pi=(n.property,wi("PoolManager")(((ai=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).pools=[],t}V(t,e);var n=t.prototype;return n.onLoad=function(){t.instance=this},n.createPool=function(e){var t=new li(e.name);t.objectPrefab=e,this.pools.push(t)},n.getObjectFromPool=function(e){var t=this.getPool(e.name);return null!=t?t.getObject():(this.createPool(e),this.pools[this.pools.length-1].getObject())},n.getPool=function(e){for(var t=0;t<this.pools.length;t++)if(this.pools[t].poolName==e)return this.pools[t];return null},n.returnObjectToPool=function(e){if(e.active){var t=e.name.split(" ")[0],n=this.getPool(t);null!=n?n.returnObject(e):console.warn("No pool found for object "+e.name)}},t}(o)).instance=null,ri=ai))||ri);e._RF.pop(),e._RF.push({},"0a689sJI1VIlY+8vUoeaUxj","Piece",void 0);var Oi,Ni,Ei,Ri,Ii,Ai,Di,Mi,Li,Fi=n.ccclass,ki=n.property,Gi=(ci=Fi("Piece"),ui=ki({type:O}),pi=ki({type:N}),hi=ki({type:N}),di=ki({type:E}),mi=ki({type:E}),fi=ki({type:_}),ci((vi=W((yi=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"pieceSprite",vi,j(t)),K(t,"pieceNumber",bi,j(t)),K(t,"playerNumber",Si,j(t)),t.moveData=[],t.previousPathNumber=0,t.pathNumber=0,t.pieceScaleOnBoard=.45,t.stackedupScale=.35,K(t,"propellerAnimation",Ci,j(t)),K(t,"dottedCircleAnim",_i,j(t)),K(t,"moveRippleEffect",Ti,j(t)),t.stackedupCount=0,t}V(t,e);var n=t.prototype;return n.Initialize=function(e,t){this.playerNumber=e,this.pieceNumber=t,this.pieceSprite.spriteFrame=oi.instance.getPawnSprite(e)},n.start=function(){},n.update=function(e){},n.move=function(e,t){var n=this.pathNumber+e;return this.isOnBase()&&6==e&&(n=1),this.setPathNumber(n),this.updateParentNode(),this.getMoveAnimation(n,t)},n.moveToTargetPathNumber=function(e,t,n){return void 0===n&&(n=.12),this.setPathNumber(e),this.updateParentNode(),this.getMoveAnimation(e,t,n)},n.getMoveAnimation=function(e,t,n){var i=this;void 0===n&&(n=.12);for(var o=this.node.worldPosition.clone(),r=so.Instance.getPathPositions(this.previousPathNumber,e,this.playerNumber,this.pieceNumber),a=(so.Instance.getPathTile(e,this.playerNumber,this.pieceNumber),R(this.node).call((function(){i.node.setWorldPosition(o)}))),s=1;s<r.length;s++)a.then(this.jumpToNextTileAnimation(this.node,r[s-1],r[s],n));return a.call((function(){null!=t&&t()})),a},n.jumpToNextTileAnimation=function(e,t,n,i){var o=this;void 0===i&&(i=.12);var r=t.clone().add(n).multiplyScalar(.5),a=e.scale.clone(),s=R(e).call((function(){bn.instance.playSound("Move"),e.setWorldPosition(t)}));return s.call((function(){o.playMoveRippleEffect(t.clone())})),s.to(i,{worldPosition:r,scale:a.clone().multiplyScalar(1.5)}),s.to(i,{worldPosition:n,scale:a}),s},n.setPathNumber=function(e){this.previousPathNumber=this.pathNumber,this.pathNumber=e},n.updateParentNode=function(e){void 0===e&&(e=-1),-1==e&&(e=this.pathNumber);var t=so.Instance.getPathTile(e,this.playerNumber,this.pieceNumber);this.node.setParent(t,!0)},n.updatePiecePosition=function(e){void 0===e&&(e=-1),-1==e&&(e=this.pathNumber),this.node.setPosition(y.ZERO.clone());so.Instance.getPathTile(e,this.playerNumber,this.pieceNumber);so.Instance.piecesOnTile(e,this.playerNumber)>1&&this.node.setWorldPosition(this.node.worldPosition.add(this.getOffsetPosition())),this.updatePieceScale()},n.getOffsetPosition=function(){if(1==this.node.parent.children.length)return y.ZERO.clone();var e=this.myIndexInTile(this.node.parent)+1;return new y(10*e-20,0,0)},n.updatePieceScale=function(){var e=so.Instance.getPawnsCountOnTile(this.pathNumber,this.playerNumber);this.isOnBase()?this.node.scale=y.ONE.clone():this.node.scale=2==e?y.ONE.clone().multiplyScalar(this.stackedupScale):e>2?y.ONE.clone().multiplyScalar(this.stackedupScale-.07):y.ONE.clone().multiplyScalar(this.pieceScaleOnBoard)},n.myIndexInTile=function(e){for(var t=0;t<e.children.length;t++)if(e.children[t]==this.node)return t;return-1},n.animatePieceToSize=function(e){R(this.node).to(.5,{scale:y.ONE.clone().multiplyScalar(e)}).start()},n.isOnBase=function(){return 0==this.pathNumber},n.playPropellerAnimation=function(e){this.propellerAnimation.node.active=!0,this.propellerAnimation.node.setPosition(y.ZERO.clone()),this.setNodeUpDirection(this.propellerAnimation.node,e),this.propellerAnimation.node.setWorldPosition(this.node.worldPosition.clone().subtract(this.propellerAnimation.node.up.multiplyScalar(50))),this.propellerAnimation.play(),bn.instance.playSound("Propeller")},n.setNodeUpDirection=function(e,t){var n=t.clone().normalize(),i=new y(0,0,1),o=new y(0,0,0);y.cross(o,n,i).normalize();var r=I();A.fromAxes(r,o,n,i),e.setWorldRotation(r)},n.stopPropellerAnimation=function(){this.propellerAnimation.stop(),this.propellerAnimation.node.active=!1,bn.instance.stopSound("Propeller")},n.playRippleAnimation=function(){this.dottedCircleAnim.node.active=!0;var e=this.dottedCircleAnim.node.getComponent(O);null!=e&&(e.color=oi.instance.getPawnColor(this.playerNumber)),this.dottedCircleAnim.play()},n.stopRippleAnimation=function(){this.dottedCircleAnim.stop(),this.dottedCircleAnim.node.active=!1},n.playMoveRippleEffect=function(e){var t=Pi.instance.getObjectFromPool(this.moveRippleEffect);t.setParent(so.Instance.node,!0),t.setWorldPosition(e);var n=t.getComponent(O);null!=n&&(n.color=oi.instance.getPawnColor(this.playerNumber)),t.getComponent(E).play()},n.reset=function(e){this.setPathNumber(e),this.updateParentNode(),this.updatePiecePosition(),this.stopPropellerAnimation()},t}(o)).prototype,"pieceSprite",[ui],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bi=W(yi.prototype,"pieceNumber",[pi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Si=W(yi.prototype,"playerNumber",[hi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ci=W(yi.prototype,"propellerAnimation",[di],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_i=W(yi.prototype,"dottedCircleAnim",[mi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ti=W(yi.prototype,"moveRippleEffect",[fi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gi=yi))||gi);e._RF.pop(),e._RF.push({},"22e2dn+VM5Dya/PxfdAZyXD","PowerUp",void 0);var zi,Hi,Ui,Bi,xi,Wi,Vi,Ki,ji,Ji,Yi,Qi,Zi,qi,Xi,$i,eo,to=n.ccclass,no=n.property,io=(Oi=to("PowerUp"),Ni=no({type:O}),Ei=no({type:_}),Ri=no({type:E}),Oi((Di=W((Ai=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"sprite",Di,j(t)),t.pathNumber=0,t.powerupType=0,K(t,"magicTrailPrefab",Mi,j(t)),K(t,"animation",Li,j(t)),t}V(t,e);var n=t.prototype;return n.start=function(){this.playIdleAnimation()},n.setPathNumber=function(e){this.pathNumber=e},n.setPowerUpType=function(e){this.powerupType=e,this.sprite.spriteFrame=oi.instance.getPowerUpSprite(e)},n.blinkWithRedColor=function(){R(this.sprite).to(.2,{color:P.RED},{onUpdate:function(e,t){e.color=P.RED}}).to(.2,{color:P.WHITE},{onUpdate:function(e,t){e.color=P.WHITE}}).union().repeatForever().start()},n.playMagicTrailEffect=function(){console.log("playMagicTrailEffect");var e=T(this.magicTrailPrefab);e.setParent(this.node,!0),e.setSiblingIndex(0),e.setPosition(y.ZERO.clone());e.getComponent(D)},n.playIdleAnimation=function(){var e=this,t=2e3*Math.random();null==this.animation&&(this.animation=this.getComponent(E)),setTimeout((function(){var t;null==(t=e.animation)||t.play()}),t)},t}(o)).prototype,"sprite",[Ni],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mi=W(Ai.prototype,"magicTrailPrefab",[Ei],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Li=W(Ai.prototype,"animation",[Ri],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ii=Ai))||Ii);e._RF.pop(),e._RF.push({},"1ee1bWDaiBCboG3mvysd2dQ","Board",void 0);var oo=n.ccclass,ro=n.property,ao=(zi=oo("HomeTiles"),Hi=ro({type:[g]}),zi((xi=W((Bi=function(){K(this,"homeTiles",xi,this)}).prototype,"homeTiles",[Hi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ui=Bi))||Ui),so=(Wi=oo("Board"),Vi=ro({type:[g]}),Ki=ro({type:[ao]}),ji=ro({type:g}),Ji=ro({type:g}),Wi(((eo=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"pathTiles",Zi,j(t)),t.tileTypes=[],t.powerUps=[],K(t,"homeTiles",qi,j(t)),K(t,"basesParent",Xi,j(t)),t.pieces=[],t._initialOffset=0,t._isInitialized=!1,t.roomSettings=null,K(t,"powerupsParent",$i,j(t)),t.bombSteps=8,t.rocketSteps=8,t}V(t,e);var n=t.prototype;return n.onLoad=function(){null==t._instance?(t._instance=this,this._initialOffset=26):this.node.destroy()},n.Initialize=function(e){if(!this._isInitialized){this.roomSettings=e.roomSettings;var t=e.playersData.find((function(e){return e.sessionId==ut.Instance.CurrentRoom.sessionId}));null!=t&&(this.node.setRotationFromEuler(0,0,180+90*this.getPlayerPositionOnBoard(t.playerNumber)),this._isInitialized=!0,this.bombSteps=this.roomSettings.bombSteps,this.rocketSteps=this.roomSettings.rocketSteps,this.createTiles(e))}},n.reset=function(e){this.createTiles(e)},n.createTiles=function(e){this.tileTypes=[];for(var t=0;t<e.boardTiles.length;t++)this.tileTypes.push(e.boardTiles[t]);this.createPowerups()},n.start=function(){},n.createPowerups=function(){for(var e=[],t=0;t<this.tileTypes.length;t++)for(var n=0;n<this.roomSettings.PowerupTypes.length;n++)if(this.tileTypes[t]&this.roomSettings.PowerupTypes[n]){var i=this.popPowerupON(t);if(null!=i){e.push(i);break}var o=T(oi.instance.powerUpPrefab).getComponent(io);o.node.setParent(this.powerupsParent,!0),o.node.worldPosition=this.pathTiles[t].worldPosition.clone(),o.setPathNumber(t),o.setPowerUpType(this.tileTypes[t]),e.push(o);break}for(var r=0;r<this.powerUps.length;r++)this.powerUps[r].node.destroy();this.powerUps=e},n.popPowerupON=function(e){for(var t=0;t<this.powerUps.length;t++)if(this.powerUps[t].pathNumber==e){var n=this.powerUps[t];return this.powerUps.splice(t,1),n}return null},n.getPathTile=function(e,t,n){if(0==e)return this.getPlayerBase(t).children[n];if(e>=52)return this.homeTiles[t].homeTiles[e-52];var i=this.getGlobalTileIndex(e,t);return this.pathTiles[i]},n.getPathPositions=function(e,t,n,i){var o=[],r=null;if(0==t){for(var a=e;a>=0;a--)r=this.getPathTile(a,n,i),o.push(r.worldPosition.clone());return console.log("Piece going to home : path positions length ",o.length," start path number: ",e," end path number: ",t),o}for(var s=e;s<=t;s++)null!=(r=this.getPathTile(s,n,i))&&o.push(r.worldPosition.clone());return o},n.isPathOccupied=function(e,t){if(0==e)return!1;for(var n=this.getGlobalPiecePathNumber(t.playerNumber,t.pathNumber,this.roomSettings),i=0;i<this.pieces.length;i++)if(this.getGlobalPiecePathNumber(this.pieces[i].playerNumber,this.pieces[i].pathNumber,this.roomSettings)==n&&this.pieces[i]!=t)return!0;return!1},n.getPawnsCountOnTile=function(e,t){var n=this.getGlobalPiecePathNumber(t,e,this.roomSettings);if(-1==n)return 0;for(var i=0,o=0;o<this.pieces.length;o++){this.getGlobalPiecePathNumber(this.pieces[o].playerNumber,this.pieces[o].pathNumber,this.roomSettings)==n&&i++}return i},n.getPawnsOnTile=function(e,t){var n=this.getGlobalPiecePathNumber(t,e,this.roomSettings);if(-1==n)return[];for(var i=[],o=0;o<this.pieces.length;o++){this.getGlobalPiecePathNumber(this.pieces[o].playerNumber,this.pieces[o].pathNumber,this.roomSettings)==n&&i.push(this.pieces[o])}return i},n.canKillOtherPieces=function(e,t,n){if(this.getGlobalPiecePathNumber(t,e,this.roomSettings)<=-1)return!1;var i=this.getPathTile(e,t,n);if(this.isSafeTile(e,t))return!1;if(i.children.length>=3)return!1;for(var o=0;o<i.children.length;o++)if(i.children[o].getComponent(Gi).playerNumber!=t)return!0;return!1},n.piecesOnTile=function(e,t){for(var n=this.getGlobalPiecePathNumber(t,e,this.roomSettings),i=0,o=0;o<this.pieces.length;o++){this.getGlobalPiecePathNumber(this.pieces[o].playerNumber,this.pieces[o].pathNumber,this.roomSettings)==n&&i++}return i},n.getKillablePieces=function(e){var t=this.getGlobalPiecePathNumber(e.playerNumber,e.pathNumber,this.roomSettings);if(t<=-1)return null;if(this.isSafeTile(e.pathNumber,e.playerNumber))return null;for(var n=0,i=null,o=0;o<this.pieces.length;o++){if(this.pieces[o]!=e)this.getGlobalPiecePathNumber(this.pieces[o].playerNumber,this.pieces[o].pathNumber,this.roomSettings)==t&&(n++,this.pieces[o].playerNumber!=e.playerNumber&&(i=this.pieces[o]))}return console.log("Other Pieces on Tile: ",n),console.log("Opponent Piece: ",i),1==n?i:null},n.isSafeTile=function(e,t){var n=this.getGlobalPiecePathNumber(t,e,this.roomSettings);return(this.tileTypes[n]&ei.SAFE)>0},n.getPowerUpType=function(e){for(var t=this.getGlobalPiecePathNumber(e.playerNumber,e.pathNumber,this.roomSettings),n=this.tileTypes[t],i=0;i<this.roomSettings.PowerupTypes.length;i++)if(n&this.roomSettings.PowerupTypes[i]){this.getGlobalPiecePathNumber(e.playerNumber,e.pathNumber,this.roomSettings);return this.roomSettings.PowerupTypes[i]}return ei.DEFAULT},n.getPowerupNode=function(e){for(var t=this.getGlobalPiecePathNumber(e.playerNumber,e.pathNumber,this.roomSettings),n=0;n<this.powerUps.length;n++)if(this.powerUps[n].pathNumber==t)return this.powerUps[n].node;return null},n.removePowerUp=function(e){this.tileTypes[e.pathNumber]=ei.DEFAULT;for(var t=0;t<this.powerUps.length;t++)if(this.powerUps[t]==e){this.powerUps.splice(t,1);break}e.node.destroy()},n.removePowerUpByPathNumber=function(e){this.tileTypes[e]=ei.DEFAULT;for(var t=0;t<this.powerUps.length;t++)if(this.powerUps[t].pathNumber==e){this.powerUps[t].node.destroy(),this.powerUps.splice(t,1);break}},n.doesEnemyExist=function(e,t){if(0==t||t>=this.nonHomePathCount(this.roomSettings))return!1;for(var n=this.getGlobalPiecePathNumber(e.playerNumber,t,this.roomSettings),i=0;i<this.pieces.length;i++){var o=this.getGlobalPiecePathNumber(this.pieces[i].playerNumber,this.pieces[i].pathNumber,this.roomSettings);if(o==n&&this.pieces[i].playerNumber!=e.playerNumber)return console.log("otherPieceGlobalPathNumber: ",o," globalPathNumber: ",n),console.log("Enemy Exists at Path Number: ",this.pieces[i].pathNumber," for player: ",this.pieces[i].playerNumber," at piece: ",this.pieces[i].pieceNumber),console.log(" my piece path number: ",e.pathNumber," my piece player number: ",e.playerNumber," my piece index: ",e.pieceNumber),console.log("my piece ",e),console.log("enemy piece ",this.pieces[i]),!0}return!1},n.doesAnyPieceExistOnPath=function(e,t){if(0==t||t>=this.nonHomePathCount(this.roomSettings))return!1;for(var n=this.getGlobalPiecePathNumber(e.playerNumber,t,this.roomSettings),i=0;i<this.pieces.length;i++){if(this.pieces[i]!=e)if(this.getGlobalPiecePathNumber(this.pieces[i].playerNumber,this.pieces[i].pathNumber,this.roomSettings)==n)return!0}return!1},n.getPropellerLandingPathNumber=function(e){for(var t=e.pathNumber,n=0;n<this.rocketSteps;n++){if(!this.isValidPathNumber(t+1,e.playerNumber))return console.log("Invalid Path Number: ",t+1),t;if(this.doesAnyPieceExistOnPath(e,t+1))return console.log("Enemy Exists at Path Number: ",t+1),t;t+=1}return t},n.getBombLandingPathNumber=function(e){for(var t=e.pathNumber,n=0;n<this.bombSteps;n++){if(!this.isValidPathNumber(t+1,e.playerNumber))return t;if(this.doesAnyPieceExistOnPath(e,t+1))return t+1;t+=1}return t},n.getGlobalTileIndex=function(e,t){return(e+13*this.getPlayerPositionOnBoard(t))%this.pathTiles.length},n.getGlobalPiecePathNumber=function(e,t,n){if(t>=this.nonHomePathCount(n)){var i=t-this.nonHomePathCount(n);return-1*e*n.pathTilesPerSide-5-i}return 0==t?-1*e-1:(this.getInitialOffset(e,n)+t)%this.nonHomePathCount(n)},n.getInitialOffset=function(e,t){return 0==e?0:1==e?4*t.pathTilesPerSide+2:2==e?6*t.pathTilesPerSide+3:3==e?2*t.pathTilesPerSide+1:void 0},n.isValidPathNumber=function(e,t){return e>=0&&e<this.nonHomePathCount(this.roomSettings)+this.homePathCount(this.roomSettings)},n.nonHomePathCount=function(e){return 8*e.pathTilesPerSide+4},n.homePathCount=function(e){return e.pathTilesPerSide},n.getPlayerPositionOnBoard=function(e){return 0==e?0:1==e?2:2==e?3:3==e?1:void 0},n.getPlayerBase=function(e){return this.basesParent.children[e]},n.addPieces=function(e){var t;(t=this.pieces).push.apply(t,e)},n.addPiece=function(e){this.pieces.push(e)},n.updateAllPiecePositions=function(){for(var e=0;e<this.pieces.length;e++)this.pieces[e].updatePiecePosition()},n.createBombBlastEffect=function(e){var n=T(oi.instance.bombBlastEffectPrefab);bn.instance.playSound("BombBlast"),n.setParent(t.Instance.node,!0),n.worldPosition=e,this.scheduleOnce((function(){n.destroy()}),1)},J(t,null,[{key:"Instance",get:function(){return t._instance}}]),t}(o))._instance=null,Zi=W((Qi=eo).prototype,"pathTiles",[Vi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),qi=W(Qi.prototype,"homeTiles",[Ki],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Xi=W(Qi.prototype,"basesParent",[ji],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$i=W(Qi.prototype,"powerupsParent",[Ji],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yi=Qi))||Yi);e._RF.pop(),e._RF.push({},"c8ab5WJfzVFw7gK+HyA6v1Y","AnimationTag",void 0);var lo,co,uo,po,ho,mo,fo,go,yo,vo=function(e){return e[e.DICE_ROLL=0]="DICE_ROLL",e[e.PIECE_MOVE=1]="PIECE_MOVE",e}({});e._RF.pop(),e._RF.push({},"db1acCfgBtEspQwzIpSg7Yi","Dice",void 0);var bo=n.ccclass,So=n.property,Co=(lo=bo("Dice"),co=So({type:[w]}),uo=So({type:[w]}),po=So({type:O}),lo((fo=W((mo=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"diceFaces",fo,j(t)),K(t,"rollingFrames",go,j(t)),K(t,"diceSprite",yo,j(t)),t.onDiceRollDone=function(){},t._currentFace=0,t._rollingTween=null,t._rollDuration=.5,t}V(t,e);var n=t.prototype;return n.onLoad=function(){this._rollingTween=R(this.diceSprite.node)},n.rollDice=function(e){bn.instance.playSound("DiceRoll"),this.rollAnimation(e)},n.setDiceFace=function(e){e<0||e>=this.diceFaces.length||(this._currentFace=e,this.diceSprite.spriteFrame=this.diceFaces[e])},n.rollAnimation=function(e){var t=this;this.stopRolling(),this._rollingTween=R({value:0}).to(.5,{value:12},{onUpdate:function(e){var n=Math.floor(e.value)%t.rollingFrames.length;t.diceSprite.spriteFrame=t.rollingFrames[n]}}).call((function(){t.setDiceFace(e),console.log("~~~ Dice Rolling Done ~~~"),t.onDiceRollDone()})),this._rollingTween.tag(vo.DICE_ROLL),this._rollingTween.start()},n.stopRolling=function(){this._rollingTween&&this._rollingTween.stop()},n.reset=function(){this.diceSprite.spriteFrame=this.diceFaces[0]},t}(o)).prototype,"diceFaces",[co],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),go=W(mo.prototype,"rollingFrames",[uo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yo=W(mo.prototype,"diceSprite",[po],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ho=mo))||ho);e._RF.pop(),e._RF.push({},"28ae6s9f0JHvIUODASGOMiF","LudoRoomSettings",void 0);var _o=x({},{maxPlayers:8,minPlayers:2,maxClients:8,countdownTimeInSeconds:3,allowLateJoin:!0,maxReconnectionAttempts:3,reconnectionAttemptInterval:1e3,reconnectionTime:1e4,gameFPS:30,serverFPS:30,patchRate:1e3},{pathTilesPerSide:6,safeTiles:[1,9],diceRollWaitTime:30,movePiecesWaitTime:30,lagDelayCompensationTime:1,animationWaitTime:10,bombSteps:8,rocketSteps:8,PowerupTypes:[ei.GOLDEN_DICE,ei.BOMB,ei.PROPELLER],show_mute_button:!1,show_result_screen:!0,show_faq:!0,MissTurnsToKickOut:3,maxReconnectionAttempts:10}),To=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).pathTilesPerSide=_o.pathTilesPerSide,t.safeTiles=_o.safeTiles,t.diceRollWaitTime=_o.diceRollWaitTime,t.movePiecesWaitTime=_o.movePiecesWaitTime,t.lagDelayCompensationTime=_o.lagDelayCompensationTime,t.animationWaitTime=_o.animationWaitTime,t.bombSteps=_o.bombSteps,t.rocketSteps=_o.rocketSteps,t.PowerupTypes=_o.PowerupTypes,t.show_mute_button=_o.show_mute_button,t.show_result_screen=_o.show_result_screen,t.show_faq=_o.show_faq,t.MissTurnsToKickOut=_o.MissTurnsToKickOut,t.maxReconnectionAttempts=_o.maxReconnectionAttempts,t}return V(t,e),t.prototype.CopyFrom=function(e){this.pathTilesPerSide=e.pathTilesPerSide,this.safeTiles=[];for(var t=0;t<e.safeTiles.length;t++)this.safeTiles.push(e.safeTiles[t]);this.diceRollWaitTime=e.diceRollWaitTime,this.movePiecesWaitTime=e.movePiecesWaitTime,this.lagDelayCompensationTime=e.lagDelayCompensationTime,this.animationWaitTime=e.animationWaitTime,this.show_mute_button=e.show_mute_button,this.show_result_screen=e.show_result_screen,this.show_faq=e.show_faq,this.MissTurnsToKickOut=e.MissTurnsToKickOut,this.maxReconnectionAttempts=e.maxReconnectionAttempts},t}(Wt);e._RF.pop(),e._RF.push({},"0f127sRNEpCYZ0EXfo54zWR","LudoPlayerData",void 0);var wo=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).pieces=[1,1,1,1],t.rollsList=[],t.goldenDiceCount=0,t.timeLeft=0,t.finishPosition=-1,t.isBot=!1,t.killsCount=0,t.deathsCount=0,t}return V(t,e),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.pieces=[];for(var n=0;n<t.pieces.length;n++)this.pieces.push(t.pieces[n]);this.timeLeft=t.timeLeft,this.finishPosition=t.finishPosition,this.rollsList=[];for(var i=0;i<t.rollsList.length;i++)this.rollsList.push(t.rollsList[i]);this.goldenDiceCount=t.goldenDiceCount,this.isBot=t.isBot,this.isKickedOut=t.isKickedOut,this.killsCount=t.killsCount,this.deathsCount=t.deathsCount},t}(xt);e._RF.pop(),e._RF.push({},"0ed96DhOm5GSKiSbb+Eb8Q9","LudoInputPayload",void 0);var Po=function(){function e(){this.inputType=void 0,this.inputValue=void 0}return e.prototype.copyFrom=function(e){this.inputType=e.inputType,this.inputValue=e.inputValue},e}();e._RF.pop(),e._RF.push({},"e755fBWyzZDJblI9DGio/Bu","LudoRoomState",void 0);var Oo,No,Eo,Ro,Io,Ao,Do,Mo=function(e){function t(){var t;return(t=e.call(this,new To,[])||this).turnPlayerNumber=0,t.finishedCount=0,t.inputPayload=new Po,t.currentGameState=Xn.NONE,t.previousGameState=Xn.NONE,t.syncStateNumber=0,t.boardTiles=[],t.hasMissedTurn=!0,t.timer=0,t}return V(t,e),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.playersData=t.playersData.map((function(e){var t=new wo;return t.copyFrom(e),t})),this.spectatorsData=t.spectatorsData.map((function(e){var t=new xt;return t.copyFrom(e),t})),this.turnPlayerNumber=t.turnPlayerNumber,this.finishedCount=t.finishedCount,this.syncStateNumber=t.syncStateNumber,this.inputPayload=new Po,this.inputPayload.copyFrom(t.inputPayload),this.boardTiles=[];for(var n=0;n<t.boardTiles.length;n++)this.boardTiles.push(t.boardTiles[n]);this.hasMissedTurn=t.hasMissedTurn,this.timer=t.timer,this.currentGameState=t.currentGameState,this.previousGameState=t.previousGameState},t}(fn);e._RF.pop(),e._RF.push({},"0a81buY8M5A+ZqK07z2lO7K","Menu",void 0);var Lo,Fo,ko,Go,zo,Ho,Uo,Bo,xo,Wo,Vo,Ko,jo,Jo,Yo=n.ccclass,Qo=n.property,Zo=(Oo=Yo("Menu"),No=Qo({type:g}),Eo=Qo({type:v}),Oo((Ao=W((Io=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"content",Ao,j(t)),K(t,"menuName",Do,j(t)),t.isOpened=!1,t}V(t,e);var n=t.prototype;return n.onLoad=function(){this.content=this.node.getChildByName("Content")},n.Open=function(){this.content.active=!0,this.isOpened=!0},n.Close=function(){this.content.active=!1,this.isOpened=!1},n.initialize=function(){console.log("Menu initialize called")},t}(o)).prototype,"content",[No],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Do=W(Io.prototype,"menuName",[Eo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ro=Io))||Ro);e._RF.pop(),e._RF.push({},"a6576IhVOpCXa9WZWnCC27M","UIManager",void 0);var qo,Xo,$o=n.ccclass,er=n.property,tr=(Lo=$o("UIManager"),Fo=er({type:s}),ko=er({type:[Zo]}),Go=er({type:g}),zo=er({type:_}),Ho=er({type:g}),Lo(((Jo=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"uiCamera",xo,j(t)),K(t,"menus",Wo,j(t)),t.showMuteButton=!0,t.showResultScreen=!0,t.showFAQ=!0,K(t,"flashNode",Vo,j(t)),K(t,"showerConfettiPrefab",Ko,j(t)),K(t,"confettiPositionNode",jo,j(t)),t}V(t,e);var n=t.prototype;return n.onLoad=function(){t.instance=this,gr.on(De.ROOM_STATUS_CHANGE,this.onRoomStatusChange,this)},n.start=function(){},n.onDestroy=function(){gr.off(De.ROOM_STATUS_CHANGE,this.onRoomStatusChange,this)},n.OpenHowToPlay=function(){this.OpenMenu("HowToPlay")},n.OpenMenu=function(e){for(var t=0;t<this.menus.length;t++)this.menus[t].menuName==e&&this.menus[t].Open()},n.CloseMenu=function(e){for(var t=0;t<this.menus.length;t++)this.menus[t].menuName==e&&this.menus[t].Close()},n.GetMenu=function(e){for(var t=0;t<this.menus.length;t++)if(this.menus[t].menuName==e)return this.menus[t];return null},n.CloseAllMenus=function(){for(var e=0;e<this.menus.length;e++)this.menus[e].Close()},n.onRoomStatusChange=function(e){var t=this;e==Vt.WAITING_FOR_PLAYERS?(console.log("Opening waiting screen"),this.updateUiBasedOnConfig(),this.OpenMenu("WaitingScreen")):e==Vt.COUNTDOWN?(console.log("Opening countdown screen"),this.CloseAllMenus(),this.OpenMenu("CountdownScreen")):e==Vt.GAME_SIMULATION?this.scheduleOnce((function(){t.CloseMenu("CountdownScreen"),t.OpenMenu("InGameMenu")}),1):e==Vt.END_GAME?(this.CloseAllMenus(),this.OpenMenu("RoundCompletedScreen")):e==Vt.KICKED_OUT&&(this.CloseAllMenus(),this.OpenMenu("KickedOutScreen"))},n.FixWidthOfUICamera=function(){console.log("Fixing width of UI Camera"),this.uiCamera.orthoHeight=St.instance.getCurrentOrthoHeight(),this.FixCanvasSize()},n.FixCanvasSize=function(){var e=this.node.getComponent(a);e.setContentSize(St.instance.getWidth(),2*St.instance.camera.orthoHeight),console.log("UI Width: ",e.width,"UI Height: ",e.height);var t=this.node.getComponent(d);t.top=960-e.height/2,t.bottom=960-e.height/2,t.updateAlignment();for(var n=this.node.getComponentsInChildren(d),i=0;i<n.length;i++)n[i].updateAlignment()},n.getAllChildWidgets=function(e){var t=e.getComponentsInChildren(d);console.log("All widgets: ",t.length)},n.updateUiBasedOnConfig=function(){this.showMuteButton=yr.Instance._serverStateCopy.roomSettings.show_mute_button,this.showResultScreen=yr.Instance._serverStateCopy.roomSettings.show_result_screen,this.showFAQ=yr.Instance._serverStateCopy.roomSettings.show_faq;for(var e=0;e<this.menus.length;e++)this.menus[e].initialize()},n.playFlashEffect=function(){var e=this;this.flashNode.active=!0;var t=this.flashNode.getComponent(O);t?(t.color=new P(197,8,8,0),R(t).to(.2,{color:new P(197,8,8,255)}).to(.3,{color:new P(197,8,8,0)}).call((function(){e.flashNode.active=!1})).start()):console.error("No Sprite component found on flashNode")},n.showConfetti=function(){var e=T(this.showerConfettiPrefab);this.confettiPositionNode.addChild(e),e.setPosition(new y(0,150,0))},t}(o)).instance=null,xo=W((Bo=Jo).prototype,"uiCamera",[Fo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wo=W(Bo.prototype,"menus",[ko],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Vo=W(Bo.prototype,"flashNode",[Go],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ko=W(Bo.prototype,"showerConfettiPrefab",[zo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jo=W(Bo.prototype,"confettiPositionNode",[Ho],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Uo=Bo))||Uo);e._RF.pop(),e._RF.push({},"23d142Mn9xI9qce2e7o++Fs","GameManager",void 0);var nr,ir,or,rr,ar,sr,lr,cr,ur,pr,hr,dr,mr,fr=n.ccclass,gr=(n.property,new t),yr=fr("GameManager")(((Xo=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._roomStatus=Vt.NONE,t._won=!1,t._handledGameOverCallbacks=!1,t._handledWinLose=!1,t._serverStateCopy=null,t._missTurnsToKickOut=3,t._gameStartTime=0,t.miloSdk=new ce,t}V(t,e);var n=t.prototype;return n.onLoad=function(){null!=t._instance&&this.node.destroy(),t._instance=this,this.miloSdk.init({gameId:"Ludo",debug:!0}),this.sendGameLoadedEvent(),st.on(De.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),lt.on(De.SERVER_ROOM_STATE_CHANGE,this.onServerStateChange,this)},n.onConnectionStateChange=function(e,t){t==Me.DISCONNECTED?this._roomStatus!=Vt.END_GAME&&ut.Instance.reconnect():t==Me.KICKED_OUT&&this.setRoomStatus(Vt.KICKED_OUT)},n.setRoomStatus=function(e){this.OnRemoteGameStateChange(e),this._roomStatus=e,gr.emit(De.ROOM_STATUS_CHANGE,e)},n.onServerStateChange=function(e){null==this._serverStateCopy&&(this._serverStateCopy=new Mo,this._serverStateCopy.copyFrom(e),this._missTurnsToKickOut=this._serverStateCopy.roomSettings.MissTurnsToKickOut),e.currentRoomStatus!=Vt.END_GAME||this._handledWinLose||(console.log("Game Over"),this._serverStateCopy=new Mo,this._serverStateCopy.copyFrom(e),this.handleWon(e),this._handledWinLose=!0),this.setRoomStatus(e.currentRoomStatus)},n.handleWon=function(e){if(this._handledWinLose)console.log("Already handled win/lose sound, skipping");else{var t=new Mo;t.copyFrom(e);var n=ut.Instance.CurrentRoom.sessionId,i=t.playersData.findIndex((function(e){return e.sessionId==n}));if(-1!=i){for(var o=t.playersData[i].pieces,r=so.Instance.nonHomePathCount(t.roomSettings)+so.Instance.homePathCount(t.roomSettings)-1,a=0;a<o.length;a++)o[a]==r&&(this._won=!0);this._won?(tr.instance.showConfetti(),bn.instance.playSound("Win")):bn.instance.playSound("Lose")}}},n.getPlayersRanking=function(){var e=this;return this._serverStateCopy.playersData.sort((function(t,n){return e.getPlayerDistanceFromFinish(t)-e.getPlayerDistanceFromFinish(n)}))},n.getPlayerDistanceFromFinish=function(e){for(var t=60,n=0;n<e.pieces.length;n++)-1!=e.pieces[n]&&(t=Math.min(t,57-e.pieces[n]));return t},n.onDestroy=function(){st.off(De.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),lt.off(De.SERVER_ROOM_STATE_CHANGE,this.onServerStateChange,this)},n.update=function(e){},n.GetPlayerData=function(){return console.log("Player Profiles : ",this._serverStateCopy.playersData),this._serverStateCopy.playersData.find((function(e){return e.sessionId==ut.Instance.CurrentRoom.sessionId}))},n.GetWinnerPlayerData=function(){for(var e=-1,t=0;t<this._serverStateCopy.playersData.length;t++)if(this._serverStateCopy.playersData[t].finishPosition>=0){e=t;break}return console.log("Winner Player Id : ",e),-1==e?null:this._serverStateCopy.playersData.find((function(t){return t.playerNumber==e}))},n.OnRemoteGameStateChange=function(e){this._roomStatus!=e&&(this._roomStatus==Vt.NONE&&e==Vt.WAITING_FOR_PLAYERS||e==Vt.COUNTDOWN||(e==Vt.GAME_SIMULATION?this.sendGameStartedEvent():e==Vt.END_GAME&&(this.sendGameEndedEvent(),this.HandleGameOverCallbacks())))},n.HandleGameOverCallbacks=function(){if(!this._handledGameOverCallbacks){var e=this._won?1:0;this.sendScoreEvent(e),this._handledGameOverCallbacks=!0}},n.setInput=function(e){},n.sendGameLoadedEvent=function(){this.miloSdk.gameLoaded({timestamp:Date.now()}),console.log("[MiloGameSDK] Game loaded event sent")},n.sendGameStartedEvent=function(){this._gameStartTime=Date.now(),this.miloSdk.gameStarted({timestamp:this._gameStartTime}),console.log("[MiloGameSDK] Game started event sent")},n.sendGameEndedEvent=function(){var e=this._gameStartTime>0?Date.now()-this._gameStartTime:0;this.miloSdk.gameEnded({duration:e,hasWinningScreen:!0}),console.log("[MiloGameSDK] Game ended event sent with duration: "+e+"ms")},n.sendScoreEvent=function(e){this.miloSdk.sendScore({score:e}),console.log("[MiloGameSDK] Score event sent: "+e)},J(t,null,[{key:"Instance",get:function(){return this._instance}}]),t}(o))._instance=null,qo=Xo))||qo;e._RF.pop(),e._RF.push({},"8c924WkZnJNlIqv0zwT9X/D","InputManager",void 0),e._RF.pop(),e._RF.push({},"83c7bdmy3JL0YivBZMxwa5B","LeaderboardProfile",void 0);var vr,br,Sr,Cr,_r,Tr=n.ccclass,wr=n.property,Pr=(nr=Tr("LeaderboardProfile"),ir=wr({type:O}),or=wr({type:O}),rr=wr({type:P}),ar=wr({type:O}),sr=wr({type:M}),nr((ur=W((cr=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"profileOutline",ur,j(t)),K(t,"numberBG",pr,j(t)),K(t,"bgColor",hr,j(t)),K(t,"avatar",dr,j(t)),K(t,"nameLabel",mr,j(t)),t}V(t,e);var n=t.prototype;return n.onLoad=function(){},n.start=function(){},n.setPlayerData=function(e){this.avatar.spriteFrame=e.GetProfileSpriteFrame(),this.nameLabel.string=this.truncateName(e.playerName.string,10)},n.truncateName=function(e,t){var n=e.indexOf(" ");return-1!=n&&(e=e.substring(0,n)),e.length>t?e.substring(0,t)+"..":e},n.update=function(e){},t}(o)).prototype,"profileOutline",[ir],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pr=W(cr.prototype,"numberBG",[or],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hr=W(cr.prototype,"bgColor",[rr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dr=W(cr.prototype,"avatar",[ar],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mr=W(cr.prototype,"nameLabel",[sr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lr=cr))||lr);e._RF.pop(),e._RF.push({},"8cd52v/t59HOJftFoVA2ww3","Timer",void 0);var Or=n.ccclass,Nr=n.property,Er=(vr=Or("Timer"),br=Nr({type:O}),vr((_r=W((Cr=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._totalTime=0,t._currentTime=0,K(t,"timerSprite",_r,j(t)),t._canRunTimer=!1,t._isTimerWarning=!1,t._isLocal=!1,t}V(t,e);var n=t.prototype;return n.update=function(e){this._canRunTimer&&(this._currentTime-=e,this._currentTime<0&&(this._currentTime=0),this.timerSprite.fillRange=this.getTimeLeftPercentage(),this.checkAndSetTimerWarning())},n.isTimeUp=function(){return this._currentTime<=0},n.setTotalTime=function(e){this._totalTime=e,this._currentTime=e,this.timerSprite.fillRange=this.getTimeLeftPercentage()},n.setCurrentTime=function(e){this._currentTime=e,this.timerSprite.fillRange=this.getTimeLeftPercentage()},n.run=function(){this._canRunTimer=!0},n.stop=function(){this._canRunTimer=!1,this.reset()},n.reset=function(){this._isTimerWarning=!1,this.timerSprite.fillRange=0,bn.instance.stopSound("TimerWarning")},n.getTimeLeftPercentage=function(){return this._currentTime/this._totalTime},n.checkAndSetTimerWarning=function(){this._isLocal&&this.getTimeLeftPercentage()<.2&&(this._isTimerWarning||(bn.instance.playSound("TimerWarning"),this._isTimerWarning=!0))},n.setLocal=function(e){this._isLocal=e},t}(o)).prototype,"timerSprite",[br],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Sr=Cr))||Sr);e._RF.pop(),e._RF.push({},"a41166lGxdN64fJ7eZGwtTR","PawnHandler",void 0);var Rr,Ir,Ar,Dr,Mr,Lr=0,Fr=1,kr=function(){function e(e,t){this.player=void 0,this.pawns=void 0,this.state=Lr,this.moveDataQueue=[],this.pawnAnimation=null,this.currentHandlingPieceIndex=-1,this.currentHandlingMoveData=null,this.pieceAnimationsTag=vo.PIECE_MOVE,this.hasKilledInThisMove=!1,this.pawns=e,this.player=t}var t=e.prototype;return t.setState=function(e){this.state=e},t.onPawnMoveAnimationComplete=function(){so.Instance.updateAllPiecePositions(),this.handleData()},t.handleData=function(){if(this.hasKilledInThisMove=!1,0!=this.moveDataQueue.length){this.StopRippleAnimations();var e=this.moveDataQueue.shift();this.setState(Fr),this.player.outComesUIManager.removeOutCome(e.rollValue),this.currentHandlingPieceIndex=e.pieceIndex,this.currentHandlingMoveData=e,console.log("Handling Move Data: ","piece ",e.pieceIndex,"with roll value ",e.rollValue),this.pawnAnimation=this.pawns[e.pieceIndex].move(e.rollValue,this.onPieceLandedOnTargetTile.bind(this)),this.pawnAnimation.tag(this.pieceAnimationsTag),this.pawnAnimation.start()}else this.state==Fr&&(this.setState(Lr),this.StartRippleForValidMovePieces())},t.onPieceLandedOnTargetTile=function(){var e=this;console.log("Moved Piece to Target Tile: ",this.pawns[this.currentHandlingPieceIndex].pathNumber),0===this.pawns[this.currentHandlingPieceIndex].previousPathNumber&&this.pawns[this.currentHandlingPieceIndex].pathNumber>0&&bn.instance.playSound("PawnOutOfBase");var t=this.killOpponentPieces(this.pawns[this.currentHandlingPieceIndex]);if(null!=t)return t.call((function(){e.onPieceLandedOnTargetTile()})),void t.start();var n=this.handlePowerUps(this.pawns[this.currentHandlingPieceIndex]);if(null!=n&&bn.instance.playSound("Power"),null==n||n.start(),null==n){if(ms.Instance.anyPlayerFinished())return console.log("All Players Finished : Sending Move Ack"),void this.sendMoveAck();if(this.hasKilledInThisMove)return console.log("Killed in this move: Sending Move Ack"),void this.sendMoveAck();this.currentHandlingMoveData.sendAck&&this.sendMoveAck(),this.onPawnMoveAnimationComplete()}},t.handlePowerUps=function(e){var t=so.Instance.getPowerUpType(e);return t==ei.PROPELLER?(console.log("Landed on Propeller Powerup"),this.getPropellerAnimation(e)):t==ei.BOMB?(console.log("Landed on Bomb Powerup"),this.getBombAnimation(e)):t==ei.GOLDEN_DICE?(console.log("Landed on Golden Dice Powerup"),this.getGoldenDiceAnimation(e)):null},t.getPropellerAnimation=function(e){var t=this,n=so.Instance.getPropellerLandingPathNumber(e);console.log("Propeller Landing Path Number: ",n);var i=so.Instance.getPowerupNode(e);so.Instance.removePowerUp(i.getComponent(io)),e.setPathNumber(n),e.updateParentNode();var o=so.Instance.getPathTile(n,e.playerNumber,e.pieceNumber).worldPosition.clone(),r=y.distance(e.node.worldPosition,o)/100*.15,a=o.clone().subtract(e.node.worldPosition).normalize();r=Math.max(r,.3);var s=R(e.node).call((function(){e.playPropellerAnimation(a)})).to(r,{worldPosition:o});return s.call((function(){e.stopPropellerAnimation(),t.onPieceLandedOnTargetTile()})),s.tag(this.pieceAnimationsTag),s},t.getGoldenDiceAnimation=function(e){var t=this,n=so.Instance.getPowerupNode(e),i=n.getComponent(io),o=this.player.node.worldPosition;n.setParent(this.player.node,!0),i.playMagicTrailEffect(),console.log("Golden Dice Powerup Target Position: ",o);var r=y.distance(n.worldPosition,o)/50*.15;r=u.clamp(r,.3,1),console.log("Golden Dice Animation Duration: ",r);var a=R(this.player.node).to(.2,{scale:y.ONE.clone().multiplyScalar(1.15)}).to(.1,{scale:y.ONE.clone()}),s=R(n);return s.call((function(){bn.instance.playSound("MagicTrail")})),s.to(.05,{scale:y.ONE.clone().multiplyScalar(.7)}),s.to(r,{worldPosition:o},{easing:"expoIn"}),s.call((function(){bn.instance.stopSound("MagicTrail"),a.start()})),s.delay(.1),s.call((function(){so.Instance.removePowerUp(i),t.onPieceLandedOnTargetTile()})),s},t.getBombAnimation=function(e){var t=this,n=so.Instance.getPowerupNode(e),i=n.getComponent(io),o=so.Instance.getBombLandingPathNumber(e);console.log("Bomb Landing Path Number: ",o),e.setPathNumber(o),e.updateParentNode();var r=so.Instance.getPathPositions(e.previousPathNumber,o,e.playerNumber,e.pieceNumber),a=e.getMoveAnimation(o,null);a.tag(this.pieceAnimationsTag);for(var s=R(n).call((function(){n.setWorldPosition(r[0]),i.blinkWithRedColor()})),l=1;l<r.length;l++)s.then(this.jumpToNextTileAnimation(n,r[l-1],r[l])),l==r.length-1&&s.call((function(){a.call((function(){t.onPieceLandedOnTargetTile()})),a.start()}));return s.call((function(){var i;so.Instance.createBombBlastEffect(n.worldPosition.clone()),null==(i=t.killOpponentPieces(e))||i.start(),so.Instance.removePowerUp(n.getComponent(io))})),s.tag(this.pieceAnimationsTag),s},t.jumpToNextTileAnimation=function(e,t,n){var i=t.clone().add(n).multiplyScalar(.5),o=e.scale.clone(),r=R(e).call((function(){bn.instance.playSound("Move"),e.setWorldPosition(t)}));return r.to(.12,{worldPosition:i,scale:o.clone().multiplyScalar(1.5)}),r.to(.12,{worldPosition:n,scale:o}),r},t.killOpponentPieces=function(e){var t=this,n=so.Instance.getKillablePieces(e);if(null!=n){console.log("Killing Opponent Piece: ","piece ",n.pieceNumber,"of player ",n.playerNumber);var i=so.Instance.getPathPositions(n.pathNumber,0,n.playerNumber,n.pieceNumber);n.setPathNumber(0),n.updateParentNode(),n.updatePieceScale();var o=u.clamp(y.distance(n.node.worldPosition,i[i.length-1])/50*.15,.3,1);console.log("kill animation duration per tile: ",o);var r=R(n.node);return r.call((function(){bn.instance.playSound("Kill");var e=ms.Instance.getPlayer(n.playerNumber);e&&e._isLocal&&tr.instance.playFlashEffect(),n.node.setWorldPosition(i[0])})),r.to(o,{worldPosition:i[i.length-1]},{progress:function(e,n,i,o){return u.lerp(e,n,t.easeOutBack(o))}}),r.call((function(){})),this.hasKilledInThisMove=!0,r}},t.easeOutBack=function(e){var t=1.70158*1.5;return 1+3.5523700000000002*Math.pow(e-1,3)+t*Math.pow(e-1,2)},t.movePiece=function(e,t,n){this.moveDataQueue.push({pieceIndex:e,rollValue:t,sendAck:n}),this.state==Lr&&this.handleData()},t.Reset=function(e){this.stopAllAnimations(),this.moveDataQueue=[],this.setState(Lr),this.ResetPawnPositions(e),so.Instance.reset(e)},t.ResetPawnPositions=function(e){for(var t=e.playersData[this.player.playerNumber],n=0;n<t.pieces.length;n++)this.pawns[n].reset(t.pieces[n]);console.log("Reset Pawn Positions of Player: ",this.player.playerNumber)},t.stopAllAnimations=function(){this.StopRippleAnimations(),L.stopAllByTag(this.pieceAnimationsTag)},t.sendMoveAck=function(){ut.Instance.CurrentRoom.send($n.MOVE_PIECE_ACK,JSON.stringify({}))},t.isAnimating=function(){return this.state==Fr},t.StartRippleForValidMovePieces=function(){if(this.player._isLocal)for(var e=this.player._stateMachine.movePieceState.getAllMovablePieces(),t=0;t<e.length;t++)e[t].playRippleAnimation()},t.StopRippleAnimations=function(){if(this.player._isLocal)for(var e=0;e<this.pawns.length;e++)this.pawns[e].stopRippleAnimation()},e}();e._RF.pop(),e._RF.push({},"4a1a8dT5UlLybsKXTOlw6bp","OutComesUIManager",void 0);var Gr,zr,Hr,Ur,Br,xr,Wr,Vr,Kr,jr,Jr,Yr,Qr,Zr,qr,Xr=n.ccclass,$r=n.property,ea=(Rr=Xr("OutComesUIManager"),Ir=$r({type:_}),Rr((Mr=W((Dr=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"outComesPrefab",Mr,j(t)),t.currentOutComesUI=[],t.currentOutComesValues=[],t.goldenDiceOutcomes=0,t.player=null,t}V(t,e);var n=t.prototype;return n.setGoldenDiceOutcomes=function(e){this.goldenDiceOutcomes=e},n.addOutCome=function(e){var t=T(this.outComesPrefab);t.setParent(this.node),t.getComponent(O).spriteFrame=oi.instance.getDiceOutComesStackSprite(e),this.currentOutComesUI.length<this.goldenDiceOutcomes&&6==e&&(t.getComponent(O).spriteFrame=oi.instance.getGoldenDiceOutComeSprite()),this.currentOutComesUI.push(t),this.currentOutComesValues.push(e),this.onOutComesChanged()},n.removeOutCome=function(e){var t=this.currentOutComesValues.indexOf(e);-1!=t&&(this.currentOutComesUI[t].destroy(),this.currentOutComesUI.splice(t,1),this.currentOutComesValues.splice(t,1)),this.onOutComesChanged()},n.clearAllOutComes=function(){console.warn("Clearing All OutComes"),this.currentOutComesUI.forEach((function(e){e.destroy()})),this.currentOutComesUI=[],this.currentOutComesValues=[],this.onOutComesChanged()},n.getOutComes=function(){return this.currentOutComesValues},n.onOutComesChanged=function(){this.currentOutComesValues.length<=0?this.player.enableName(!0):this.player.enableName(!1)},n.reset=function(e){this.clearAllOutComes();for(var t=0;t<e.length;t++)this.addOutCome(e[t]);console.warn("all out comes ",this.getOutComes())},n.setPlayer=function(e){this.player=e},t}(o)).prototype,"outComesPrefab",[Ir],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ar=Dr))||Ar);e._RF.pop(),e._RF.push({},"82257YZ0ItFMLk4RMvYh+rJ","MoveOptionsInput",void 0);var ta=n.ccclass,na=n.property,ia=(Gr=ta("MoveOptionsInput"),zr=na({type:M}),Hr=na({type:M}),Ur=na({type:M}),Br=na({type:g}),xr=na({type:a}),Wr=na({type:O}),Gr((jr=W((Kr=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"firstOutComeLabel",jr,j(t)),K(t,"secondOutComeLabel",Jr,j(t)),K(t,"thirdOutComeLabel",Yr,j(t)),t.outComeValues=[6,6,6],K(t,"pointer",Qr,j(t)),t.outComeClickedCallback=null,t.uiTransform=null,K(t,"optionsUITransform",Zr,j(t)),K(t,"optionsBGSprite",qr,j(t)),t}V(t,e);var n=t.prototype;return n.onLoad=function(){this.uiTransform=this.node.getComponent(a)},n.onEnable=function(){this.firstOutComeLabel.node.on(g.EventType.TOUCH_START,this.onFirstOutComeClick,this),this.secondOutComeLabel.node.on(g.EventType.TOUCH_START,this.onSecondOutComeClick,this),this.thirdOutComeLabel.node.on(g.EventType.TOUCH_START,this.onThirdOutComeClick,this)},n.onDisable=function(){this.firstOutComeLabel.node.off(g.EventType.TOUCH_START,this.onFirstOutComeClick,this),this.secondOutComeLabel.node.off(g.EventType.TOUCH_START,this.onSecondOutComeClick,this),this.thirdOutComeLabel.node.on(g.EventType.TOUCH_START,this.onThirdOutComeClick,this)},n.setOutComeSprites=function(e,t){this.outComeValues=e,this.optionsBGSprite.color=oi.instance.getPawnColor(t),e.length>=1&&(this.firstOutComeLabel.string=this.outComeValues[0].toString()),e.length>=2?(console.log("Setting Second OutCome"),this.secondOutComeLabel.node.active=!0,this.secondOutComeLabel.string=this.outComeValues[1].toString()):this.secondOutComeLabel.node.active=!1,e.length>=3?(console.log("Setting Third OutCome"),this.thirdOutComeLabel.node.active=!0,this.thirdOutComeLabel.string=this.outComeValues[2].toString()):this.thirdOutComeLabel.node.active=!1},n.onFirstOutComeClick=function(){null!=this.outComeClickedCallback&&this.outComeClickedCallback(this.outComeValues[0])},n.onSecondOutComeClick=function(){null!=this.outComeClickedCallback&&this.outComeClickedCallback(this.outComeValues[1])},n.onThirdOutComeClick=function(){null!=this.outComeClickedCallback&&this.outComeClickedCallback(this.outComeValues[2])},n.SetPosition=function(e){var t=St.instance.getWidth(),n=.5*this.optionsUITransform.width,i=.2*this.optionsUITransform.width,o=e.x,r=o,a=0;console.log("Debug - Screen Width:",t,"Component Width:",this.optionsUITransform.width,"Half Width:",n,"Offset Width:",i),console.log("Debug - Pawn X:",o,"Default Left Bound:",o-n,"Default Right Bound:",o+n),o-n<0?(a=o-(r=o+n-i),console.log("Left overflow - Moving options 20% left. Actual X:",r,"Pointer offset:",a)):o+n>t?(a=o-(r=o-n+i),console.log("Right overflow - Moving options 20% right. Actual X:",r,"Pointer offset:",a)):console.log("No overflow - Centered on pawn"),this.node.setWorldPosition(new y(r,e.y,e.z)),this.optionsUITransform.node.setPosition(new y(0,0,0));var s=n-20;a=Math.max(-s,Math.min(s,a)),this.pointer&&this.pointer.setPosition(new y(a,this.pointer.position.y,this.pointer.position.z)),console.log("Final - World X:",r,"Pointer offset:",a,"Final bounds:",r-n,"to",r+n)},n.SetBackgroundColor=function(e){this.optionsBGSprite.color=e},t}(o)).prototype,"firstOutComeLabel",[zr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jr=W(Kr.prototype,"secondOutComeLabel",[Hr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yr=W(Kr.prototype,"thirdOutComeLabel",[Ur],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qr=W(Kr.prototype,"pointer",[Br],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zr=W(Kr.prototype,"optionsUITransform",[xr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qr=W(Kr.prototype,"optionsBGSprite",[Wr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vr=Kr))||Vr);e._RF.pop(),e._RF.push({},"81221DADStNsZTuByqpMaNl","PlayerBaseState",void 0);var oa=function(){};e._RF.pop(),e._RF.push({},"e70711RJN9DbLFh+OitYKao","IdleState",void 0);var ra=function(e){function t(t){var n;return(n=e.call(this)||this).stateMachine=void 0,n._stateName=as.IDLE,n.player=void 0,n.stateMachine=t,n.player=n.stateMachine.player,n}V(t,e);var n=t.prototype;return n.enterState=function(){this.clearPlayerData()},n.updateState=function(e){},n.exitState=function(){},n.clearPlayerData=function(){this.player.timer.stop(),this.player.outComesUIManager.setGoldenDiceOutcomes(0),this.player.outComesUIManager.clearAllOutComes(),this.player.dice.reset(),this.player.diceRoot.active=!1,null!=this.player._moveOptioneInput&&(this.player._moveOptioneInput.node.active=!1)},t}(oa);e._RF.pop(),e._RF.push({},"444f8gQ1MtJyIKnQJtbiVnF","MovePieceState",void 0);var aa=function(e){function t(t){var n;return(n=e.call(this)||this).stateMachine=void 0,n._stateName=as.MOVING_PIECE,n.player=void 0,n.moveOptionsOffset=new y(0,120,0),n.stateMachine=t,n.player=n.stateMachine.player,n}V(t,e);var n=t.prototype;return n.enterState=function(){console.log("Entered Moving Piece State"),console.log("Rolls : ",this.player.outComesUIManager.getOutComes());var e=this.stateMachine.currentServerState.playersData[this.player.playerNumber];this.player.outComesUIManager.reset(e.rollsList),this.player.diceRoot.active=!1,this.player.timer.stop(),this.player.timer.setTotalTime(this.stateMachine.currentServerState.roomSettings.movePiecesWaitTime),this.player.timer.run(),this.player._pawnHandler.StartRippleForValidMovePieces();for(var t=0;t<this.player.pawns.length;t++)this.player.pawns[t].node.on(g.EventType.TOUCH_START,this.OnPieceClick,this)},n.updateState=function(e){},n.exitState=function(){console.log("Exited Move Piece State local ",this.player._isLocal),this.player.timer.stop(),this.player._pawnHandler.Reset(this.stateMachine.currentServerState);for(var e=0;e<this.player.pawns.length;e++)this.player.pawns[e].node.off(g.EventType.TOUCH_START,this.OnPieceClick,this)},n.getAllMovablePieces=function(){for(var e,t=this,n=[],i=this.player.outComesUIManager.getOutComes(),o=function(o){e=i.filter((function(e){return t.canMovePiece(t.player.pawns[o].pathNumber,e)})),(e=Array.from(new Set(e))).length>0&&n.push(t.player.pawns[o])},r=0;r<this.player.pawns.length;r++)o(r);return n},n.OnPieceClick=function(e){var t=this;if(this.player._isLocal)if(this.player._pawnHandler.isAnimating())this.player._moveOptioneInput.node.active=!1;else{this.player._moveOptioneInput.node.active=!1;var n=e.target.getComponent(Gi),i=this.player.outComesUIManager.getOutComes().filter((function(e){return t.canMovePiece(n.pathNumber,e)}));if(i=Array.from(new Set(i)),console.log("Piece Valid OutComes: ",i),0!=i.length)return 1==i.length&&this.sendMovePieceMessage(n.pieceNumber,i[0]),i.length>=2?(this.player._moveOptioneInput.node.active=!0,this.player._moveOptioneInput.outComeClickedCallback=this.outComeClickedCallback.bind(this),this.player._moveOptioneInput.setOutComeSprites(i,this.player.playerNumber),this.player._currentSelectedPieceNumber=n.pieceNumber,void this.player._moveOptioneInput.SetPosition(e.target.worldPosition.clone().add(this.moveOptionsOffset))):void 0}},n.onMovePiece=function(){var e=JSON.parse(this.stateMachine.currentServerState.inputPayload.inputValue);console.log("Move Piece From Server: ",e);this.stateMachine.currentServerState.playersData[this.player.playerNumber];var t=e.pieceIndex,n=e.rollValue;this.player.timer.stop(),this.player._moveOptioneInput.node.active=!1,this.player._pawnHandler.movePiece(t,n,!0)},n.canMovePiece=function(e,t){var n=this.player._roomSettings;return(0!=e||6==t)&&!(e+t>this.nonHomePathCount(n)+this.homePathCount(n))},n.nonHomePathCount=function(e){return 8*e.pathTilesPerSide+4},n.homePathCount=function(e){return e.pathTilesPerSide},n.sendMovePieceMessage=function(e,t){yr.Instance.setInput("MovePiece"),ut.Instance.CurrentRoom.send($n.MOVE_PIECE,JSON.stringify({pieceIndex:e,rollValue:t})),console.log("Move Piece Message Sent : ","piece ",e,"with roll value ",t)},n.outComeClickedCallback=function(e){this.sendMovePieceMessage(this.player._currentSelectedPieceNumber,e),this.player._moveOptioneInput.node.active=!1,this.player._currentSelectedPieceNumber=-1},n.reset=function(){this.exitState()},t}(oa);e._RF.pop(),e._RF.push({},"702c9BQx2pN6Z0Ud7kavU88","RollingState",void 0);var sa=function(e){function t(t){var n;return(n=e.call(this)||this).stateMachine=void 0,n._stateName=as.ROLLING,n.player=void 0,n.currentDiceOutcome=0,n.goldenDiceOutcomes=0,n.stateMachine=t,n.player=n.stateMachine.player,n.player.dice.onDiceRollDone=n.onDiceRollDone.bind(j(n)),n}V(t,e);var n=t.prototype;return n.enterState=function(){console.log("Entered Rolling State"),this.player.diceRoot.active=!0,this.player.dice.reset(),Ee.info("dice active"),this.player.timer.stop(),this.player.timer.setTotalTime(this.stateMachine.currentServerState.roomSettings.diceRollWaitTime),this.player.timer.run(),this.player._pawnHandler.Reset(this.stateMachine.currentServerState),this.updateGoldenDiceCount(),this.player._isLocal&&(this.player.dice.node.on(g.EventType.TOUCH_START,this.OnDiceClick,this),this.player.arrowPointToDiceAnimation(!0)),t.lastRolledPlayer&&t.lastRolledPlayer!=this.player&&this.player._isLocal&&yr.Instance.miloSdk.vibratePreset("light"),t.lastRolledPlayer=this.player},n.updateState=function(e){},n.exitState=function(){this.player.diceRoot.active=!1,this.player.timer.stop(),console.log("Exited Rolling State local ",this.player._isLocal);var e=this.stateMachine.currentServerState.playersData[this.player.playerNumber].rollsList;this.player.outComesUIManager.reset(e),this.player._isLocal&&this.player.dice.node.off(F.EventType.TOUCH_START,this.OnDiceClick,this)},n.OnDiceClick=function(e){this.player._isLocal&&(this.player.dice.node.off(F.EventType.TOUCH_START,this.OnDiceClick,this),yr.Instance.setInput("DiceRoll"),this.player.arrowPointToDiceAnimation(!1),console.log("Clicked on Dice"),ut.Instance.CurrentRoom.send($n.CLIENT_DICE_ROLL,JSON.stringify({})))},n.onDiceRollDone=function(){this.player.outComesUIManager.addOutCome(this.currentDiceOutcome),ut.Instance.CurrentRoom.send($n.ROLLING_ACK,JSON.stringify({})),console.log("Roll Ack Sent")},n.onDiceOutCome=function(){var e=JSON.parse(this.stateMachine.currentServerState.inputPayload.inputValue);this.player.dice.rollDice(e.value),this.currentDiceOutcome=e.value,console.log("Rolled : ",e.value),this.player.timer.stop()},n.updateGoldenDiceCount=function(){var e=this.stateMachine.currentServerState.playersData[this.player.playerNumber];this.goldenDiceOutcomes=e.goldenDiceCount,this.player.outComesUIManager.setGoldenDiceOutcomes(this.goldenDiceOutcomes),this.player.outComesUIManager.reset(e.rollsList)},n.reset=function(){this.exitState()},t}(oa);sa.lastRolledPlayer=void 0,e._RF.pop(),e._RF.push({},"cb37dCffHpJSZozHdVLEWuw","PlayerStateMachine",void 0);var la,ca,ua,pa,ha,da,ma,fa=function(){function e(e){this._currentState=void 0,this.idleState=void 0,this.rollingState=void 0,this.movePieceState=void 0,this.player=void 0,this.currentServerState=void 0,this.currentTurnPlayerNumber=-1,this.player=e,this.idleState=new ra(this),this.rollingState=new sa(this),this.movePieceState=new aa(this),this._currentState=this.idleState}var t=e.prototype;return t.updateState=function(e){null!=this._currentState&&this._currentState.updateState(e)},t.changeState=function(e){this._currentState.exitState(),this._currentState=e,this._currentState.enterState()},t.getPlayerNumber=function(){return this.player.playerNumber},t.onServerStateChange=function(e){if(this.currentServerState=e,Ee.info("onServerStateChange input payload inputType : ",e.inputPayload.inputType),this.currentTurnPlayerNumber!=e.turnPlayerNumber&&(this.currentTurnPlayerNumber=e.turnPlayerNumber,this.player.isMyTurn(e.turnPlayerNumber)&&(console.log("===================================="),console.log("Player Turn : ",this.currentTurnPlayerNumber))),this.currentServerState.currentRoomStatus!==Vt.END_GAME&&this.checkAndUpdateBotScreen(),this.player.isMyTurn(e.turnPlayerNumber)){if(Ee.info("input payload inputType : ",e.inputPayload.inputType),e.inputPayload.inputType!=$n.NONE)switch(e.inputPayload.inputType){case $n.SET_STATE:this.onSetState(e);break;case $n.DICE_OUTCOME:this._currentState==this.rollingState&&this.rollingState.onDiceOutCome();break;case $n.MOVE_PIECE:this._currentState==this.movePieceState&&this.movePieceState.onMovePiece()}}else this._currentState!=this.idleState&&this.changeState(this.idleState)},t.onReconnection=function(e){this.currentServerState=e,this.rollingState.exitState(),this.movePieceState.exitState(),this.player.isMyTurn(e.turnPlayerNumber)?e.currentGameState==Xn.ROLLING?(this._currentState=this.rollingState,this._currentState.enterState(),this.player.timer.setCurrentTime(e.timer)):e.currentGameState==Xn.MOVING_PIECE&&(this._currentState=this.movePieceState,this._currentState.enterState(),this.player.timer.setCurrentTime(e.timer)):this.changeState(this.idleState)},t.onSetState=function(e){e.currentGameState==Xn.ROLLING?this.changeState(this.rollingState):e.currentGameState==Xn.MOVING_PIECE&&this.changeState(this.movePieceState)},t.checkAndUpdateBotScreen=function(){this.player._isLocal&&(this.currentServerState.playersData[this.player.playerNumber].isKickedOut?tr.instance.OpenMenu("KickedOutScreen"):this.currentServerState.playersData[this.player.playerNumber].isBot&&(console.log("Opening BotMadeMoveScreen"),tr.instance.OpenMenu("BotMadeMoveScreen")))},e}();e._RF.pop(),e._RF.push({},"a43f74AVB9Gqqqqgxmr+EpO","PlayerAvatar",void 0);var ga,ya,va,ba,Sa,Ca,_a,Ta,wa,Pa,Oa,Na,Ea,Ra,Ia,Aa,Da,Ma,La,Fa,ka,Ga,za,Ha,Ua,Ba,xa,Wa,Va,Ka,ja,Ja=n.ccclass,Ya=n.property,Qa=(la=Ja("PlayerAvatar"),ca=Ya({type:O,tooltip:"Player Avatar"}),ua=Ya({type:O,tooltip:"Player Avatar Outline"}),la((da=W((ha=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"playerAvatar",da,j(t)),K(t,"outline",ma,j(t)),t.enableOnClick=!1,t.userId="",t}V(t,e);var n=t.prototype;return n.initialize=function(e,t){this.enableOnClick=e,this.userId=t},n.onEnable=function(){this.registerTouchEvents()},n.onDisable=function(){this.unregisterTouchEvents()},n.start=function(){},n.update=function(e){},n.registerTouchEvents=function(){this.playerAvatar.node.on(g.EventType.TOUCH_START,this.handleTouchStart,this)},n.unregisterTouchEvents=function(){this.playerAvatar.node.off(g.EventType.TOUCH_START,this.handleTouchStart,this)},n.handleTouchStart=function(){this.enableOnClick},n.setOutline=function(e){this.outline.enabled=e},n.setAvatarFromUrl=function(e){console.log("Setting avatar from url: ",e);var t=this.getFromCache(e);t?this.createSpriteFrameFromTexture(t):this.loadRemoteImage(e)},n.setAvatarFromSpriteFrame=function(e){this.playerAvatar.spriteFrame=e},n.getFromCache=function(e){return k.assets.get(e)||null},n.createSpriteFrameFromTexture=function(e){var t=new w;t.texture=e,this.playerAvatar.spriteFrame=t},n.loadRemoteImage=function(e){var t=this;k.loadRemote(e,{ext:".png"},(function(n,i){if(n)return console.error("[Player] Failed to load profile image: "+JSON.stringify(n)),void(window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({message:"player_avatar_load_failed",data:{userId:t.userId,url:e,errorName:n.name,errorMessage:n.message,errorStack:n.stack}})));try{var o=new w,r=new G;r.image=i,o.texture=r,t.playerAvatar.spriteFrame=o}catch(n){console.error("[Player] Error creating sprite frame: "+n),window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({message:"player_sprite_frame_creation_failed",data:{userId:t.userId,url:e,error:n}}))}}))},t}(o)).prototype,"playerAvatar",[ca],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ma=W(ha.prototype,"outline",[ua],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pa=ha))||pa);e._RF.pop(),e._RF.push({},"8388e7zpvBGqpuDKglcd+3C","Player",void 0);var Za,qa,Xa,$a,es,ts,ns,is,os=n.ccclass,rs=n.property,as=function(e){return e[e.IDLE=0]="IDLE",e[e.ROLLING=1]="ROLLING",e[e.MOVING_PIECE=2]="MOVING_PIECE",e}({}),ss=(ga=os("Player"),ya=rs({type:N}),va=rs({type:M}),ba=rs({type:O}),Sa=rs({type:O}),Ca=rs({type:d}),_a=rs({type:Er}),Ta=rs({type:O}),wa=rs({type:Co}),Pa=rs({type:g}),Oa=rs({type:O}),Na=rs({type:O}),Ea=rs({type:Qa}),Ra=rs({type:ea}),Ia=rs({type:g}),ga((Ma=W((Da=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"playerNumber",Ma,j(t)),K(t,"playerName",La,j(t)),K(t,"profileImage",Fa,j(t)),K(t,"profilePicHolder",ka,j(t)),K(t,"profilePicWidget",Ga,j(t)),K(t,"timer",za,j(t)),K(t,"timerSprite",Ha,j(t)),K(t,"dice",Ua,j(t)),K(t,"diceRoot",Ba,j(t)),K(t,"diceBgSprite",xa,j(t)),K(t,"namePlateSprite",Wa,j(t)),K(t,"playerAvatar",Va,j(t)),t.bases=[],t.pawns=[],t.state=as.IDLE,t.playerData=null,t._isLocal=!1,t._isInitialized=!1,t._currentPiecesData=[0,0,0,0],t._playerIndex=0,t._currentDiceValue=1,t._pieceAnimations=[],t._isProfileInitialized=!1,t._board=null,t._myBasesParent=null,t._pawnHandler=null,K(t,"outComesUIManager",Ka,j(t)),K(t,"dicePointingArrow",ja,j(t)),t.diceArrowInitialPosition=new y(0,0,0),t._currentSelectedPieceNumber=-1,t._moveOptioneInput=null,t._roomSettings=null,t._stateMachine=void 0,t.profileImageUrl="",t.arrowAnimation=null,t}V(t,e);var n=t.prototype;return n.onLoad=function(){this._pawnHandler=new kr(this.pawns,this),this.diceArrowInitialPosition=this.dicePointingArrow.getPosition(),this.outComesUIManager.setPlayer(this),null==this._stateMachine&&(this._stateMachine=new fa(this))},n.start=function(){this.createMoveOptionsUI()},n.update=function(e){this._stateMachine.updateState(e)},n.createMoveOptionsUI=function(){var e=T(oi.instance.moveOptionsUI);e.setParent(this.node),e.setPosition(new y(0,0,0)),this._moveOptioneInput=e.getComponent(ia),this._moveOptioneInput.SetBackgroundColor(oi.instance.getPawnColor(this.playerNumber)),this._moveOptioneInput.node.active=!1},n.initialize=function(e,t){var n=this;this._board=t;var i=e.playersData.find((function(e){return e.playerNumber==n.playerNumber}));null!=i&&(this.playerData=i,this.loadProfile(i),this._myBasesParent=t.getPlayerBase(this.playerNumber),this.createBases(2),this.createPawns(2),i.sessionId==ut.Instance.CurrentRoom.sessionId&&(this._isLocal=!0,this.timer.setLocal(this._isLocal)),this._roomSettings=e.roomSettings,this.setDiceBgColor(),this.setTimerColor())},n.loadProfile=function(e){this._isProfileInitialized||null!=e&&(this.playerName.string=this.truncateName(e.name,10),this.profileImageUrl=e.avatar,this.loadProfileImage(),this.profilePicHolder.color=oi.instance.getPawnColor(e.playerNumber),this.namePlateSprite.spriteFrame=oi.instance.getProfileNamePlateSprite(e.playerNumber),this._isInitialized=!0,this.profileImage.node.on(g.EventType.TOUCH_START,this.openProfile,this))},n.loadProfileImage=function(){this.profileImageUrl?this.playerAvatar.setAvatarFromUrl(this.profileImageUrl):console.warn("[Player] No profile image URL provided")},n.repostionOutComesUI=function(){var e=this.namePlateSprite.node.getComponent(a),t=(this.namePlateSprite.node.getComponent(z).cellSize.width,this.outComesUIManager.node.position.clone());t.x=e.width-30;var n=Math.sign(this.diceRoot.scale.x);t.x*=n,this.outComesUIManager.node.position=t},n.createBases=function(e){for(var t=0;t<e;t++){var n=T(oi.instance.basePrefab);n.setParent(this._myBasesParent,!0),n.name="Base"+t;var i=0,o=0;switch(t){case 0:i=-55,o=55;break;case 1:i=55,o=55;break;case 2:i=55,o=-55;break;case 3:i=-55,o=-55}e<=2&&(o=0),n.setWorldPosition(new y(i,o,0).add(this._myBasesParent.worldPosition)),this.bases.push(n)}},n.createPawns=function(e){for(var t=oi.instance.pawnPrefab,n=0;n<e;n++){var i=T(t);i.setParent(this.bases[n],!0),i.setPosition(new y(0,0,0));var o=i.getComponent(Gi);o.Initialize(this.playerNumber,n),this.pawns.push(o),so.Instance.addPiece(o)}},n.onServerStateChange=function(e){null==this._stateMachine&&(this._stateMachine=new fa(this)),this._stateMachine.onServerStateChange(e)},n.onReconnection=function(e){this._stateMachine.onReconnection(e)},n.isMyTurn=function(e){return this.playerNumber==e},n.isAnyPieceSelected=function(){return-1!=this._currentSelectedPieceNumber},n.truncateName=function(e,t){var n=e.indexOf(" ");return-1!=n&&(e=e.substring(0,n)),e.length>t?e.substring(0,t)+"..":e},n.setPlayerNumber=function(e){this.playerNumber=e},n.enableName=function(e){},n.arrowPointToDiceAnimation=function(e){var t;null==(t=this.arrowAnimation)||t.stop(),console.log("arrowPointToDiceAnimation : ",e),e?(console.log("Enabling Arrow"),this.dicePointingArrow.active=!0,this.dicePointingArrow.setPosition(this.diceArrowInitialPosition),this.arrowAnimation=R(this.dicePointingArrow),this.arrowAnimation.by(.2,{position:new y(0,-10,0)}),this.arrowAnimation.by(.2,{position:new y(0,10,0)}),this.arrowAnimation.union(),this.arrowAnimation.repeatForever(),this.arrowAnimation.start()):(console.log("Disabling Arrow"),this.dicePointingArrow.active=!1,this.arrowAnimation.stop())},n.isFinished=function(){for(var e=this._roomSettings,t=0;t<this.pawns.length;t++)if(this.pawns[t].pathNumber==so.Instance.nonHomePathCount(e)+so.Instance.homePathCount(e)-1)return!0;return!1},n.setDiceBgColor=function(){this.diceBgSprite.color=oi.instance.getDiceBgColor(this.playerNumber)},n.setTimerColor=function(){this.timerSprite},n.GetProfileSpriteFrame=function(){return this.profileImage.spriteFrame},n.openProfile=function(){var e=this,t=this._stateMachine.currentServerState.playersData.find((function(t){return t.playerNumber==e.playerNumber})).userId;console.log("Opening Profile of User : ",t)},t}(o)).prototype,"playerNumber",[ya],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),La=W(Da.prototype,"playerName",[va],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fa=W(Da.prototype,"profileImage",[ba],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ka=W(Da.prototype,"profilePicHolder",[Sa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ga=W(Da.prototype,"profilePicWidget",[Ca],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),za=W(Da.prototype,"timer",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ha=W(Da.prototype,"timerSprite",[Ta],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ua=W(Da.prototype,"dice",[wa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ba=W(Da.prototype,"diceRoot",[Pa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xa=W(Da.prototype,"diceBgSprite",[Oa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wa=W(Da.prototype,"namePlateSprite",[Na],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Va=W(Da.prototype,"playerAvatar",[Ea],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ka=W(Da.prototype,"outComesUIManager",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ja=W(Da.prototype,"dicePointingArrow",[Ia],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Aa=Da))||Aa);e._RF.pop(),e._RF.push({},"25b81UrtrtDjYeRlYLwWUZb","LudoGameHandler",void 0);var ls,cs,us,ps,hs=n.ccclass,ds=n.property,ms=(new t,Za=hs("LudoGameHandler"),qa=ds({type:[ss]}),Xa=ds({type:so}),Za(((is=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._clientState=void 0,t._serverState=void 0,K(t,"players",ts,j(t)),K(t,"board",ns,j(t)),t.roomSettings=void 0,t.myPlayerNumber=-1,t.hasReconnected=!1,t.isNewPlayerJoined=!1,t}V(t,e);var n=t.prototype;return n.onLoad=function(){t._instance=this,st.on(De.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),lt.on(De.SERVER_ROOM_STATE_CHANGE,this.OnServerStateChange,this),H.on(U.EVENT_HIDE,this.onGameHide,this),H.on(U.EVENT_SHOW,this.onGameShow,this),H.on(U.EVENT_RESTART,this.onGameRestart,this),H.on(U.EVENT_CLOSE,this.onGameClose,this),window.addEventListener("beforeunload",this.onGameClose)},n.onGameHide=function(){console.log("====== Game Hide ======"),L.stopAll()},n.onGameShow=function(){console.log("====== Game Show ======"),L.stopAllByTag(vo.DICE_ROLL),yr.Instance._roomStatus,Vt.GAME_SIMULATION},n.onGameRestart=function(){console.log("====== Game Restart ======")},n.onGameClose=function(){console.log("====== Game Close ======")},n.onGameDisconnect=function(){console.log("====== Game Disconnect ======"),bn.instance.stopAllSounds()},n.onGameReconnect=function(){console.log("====== Game Reconnect ======")},n.OnServerStateChange=function(e){return null==this._clientState?(Ee.info("========= Setting initial Client State ========="),this._clientState=new Mo,this._clientState.copyFrom(e),this._serverState=new Mo,this._serverState.copyFrom(e),this.board.Initialize(e),this.InitializePlayers(e),void(this._serverState.currentGameState!=Xn.NONE&&(console.log("========= joined game in between ========="),so.Instance.reset(this._serverState),this.sendReconnectionStateToAllPlayers(this._serverState)))):(this._serverState=new Mo,this._serverState.copyFrom(e),e.currentRoomState==Vt.END_GAME?(console.log("========= Game Over State Change ",this._serverState),void this.sendReconnectionStateToAllPlayers(this._serverState)):this.hasReconnected?(console.log("========= sending Reconnection State Change ",this._serverState),so.Instance.reset(this._serverState),this.sendReconnectionStateToAllPlayers(this._serverState),void(this.hasReconnected=!1)):void this.sendStateToAllPlayers(this._serverState))},n.onConnectionStateChange=function(e,t){t==Me.DISCONNECTED?this.onGameDisconnect():e==Me.RECONNECTING&&t==Me.JOINED_ROOM&&(this.hasReconnected=!0,this.onGameReconnect())},n.sendStateToAllPlayers=function(e){Ee.info("sendStateToAllPlayers input payload inputType : ",e.inputPayload.inputType);for(var t=0;t<this.players.length;t++)this.players[t].onServerStateChange(e)},n.sendReconnectionStateToAllPlayers=function(e){console.log("=========Reconnection State Sent to All Players");for(var t=0;t<this.players.length;t++)this.players[t].node.active&&this.players[t].onReconnection(e)},n.InitializePlayers=function(e){-1==this.myPlayerNumber&&(this.assignMyPlayerNumber(e),this.rotatePlayerNumbersInProfileUI(this.getNumberOfProfileRotation(this.myPlayerNumber)));for(var t=0;t<e.playersData.length;t++){var n=this.getPlayer(t);null==n||n.node.active||(n.node.active=!0,n.initialize(e,this.board))}},n.assignMyPlayerNumber=function(e){for(var t=0;t<e.playersData.length;t++)if(e.playersData[t].sessionId==ut.Instance.CurrentRoom.sessionId){this.myPlayerNumber=t;break}},n.rotatePlayerNumbersInProfileUI=function(e){for(;e>0;){for(var t=-1,n=-1,i=0;i<this.players.length;i++)t=this.players[i].playerNumber,this.players[i].playerNumber=n,n=t;this.players[0].playerNumber=n,e--}},n.getNumberOfProfileRotation=function(e){return 0==e?0:1==e?2:2==e?1:3==e?3:void 0},n.getPlayer=function(e){return this.players.find((function(t){return t.playerNumber==e}))},n.allPlayersFinished=function(){for(var e=0,t=0,n=0;n<this.players.length;n++)this.players[n].node.active&&(t++,this.players[n].isFinished()&&e++);return console.log("Finished Players Count ",e),console.log("Total Players ",this.players.length),e==t-1},n.anyPlayerFinished=function(){for(var e=0;e<this.players.length;e++)if(this.players[e].isFinished())return!0;return!1},n.getMostKillsPlayer=function(){var e=this._serverState.playersData.reduce((function(e,t){return t.killsCount>e.killsCount?t:e}));return this.getPlayer(e.playerNumber)},n.getMostDeathsPlayer=function(){var e=this._serverState.playersData.reduce((function(e,t){return t.deathsCount>e.deathsCount?t:e}));return this.getPlayer(e.playerNumber)},n.isLocalUserHost=function(){var e,t=yr.Instance.miloSdk.getHostId(),n=this.getPlayer(this.myPlayerNumber);return null!=n&&null!=(e=n.playerData)&&e.userId?t===n.playerData.userId:(console.warn("Local player data not available"),!1)},n.getHostPlayer=function(){var e=yr.Instance.miloSdk.getHostId(),t=this._serverState.playersData.find((function(t){return t.userId===e}));return t?this.getPlayer(t.playerNumber):null},J(t,null,[{key:"Instance",get:function(){return this._instance}}]),t}(o))._instance=void 0,ts=W((es=is).prototype,"players",[qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ns=W(es.prototype,"board",[Xa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$a=es))||$a);e._RF.pop(),e._RF.push({},"b915dSkdaBJ35186Lt+xPm7","MiloClientSdk",void 0);var fs=n.ccclass,gs=n.property,ys=n.executionOrder;function vs(e){try{var t={type:"GAME_EVENT",payload:e,timestamp:Date.now()};console.log("Sending message to parent:",t),window.parent.postMessage(JSON.stringify(t),"*")}catch(e){console.error("Failed to send message:",e)}}var bs,Ss,Cs,_s,Ts,ws,Ps;fs("MiloClientSdk")(ls=ys(-100)(((ps=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"gameName",us,j(t)),t.isDebugMode=!0,t}V(t,e);var n=t.prototype;return n.onLoad=function(){t.instance=this},n.handlePauseGame=function(){this.gamePaused()},n.handleResumeGame=function(){this.gameResumed()},n.gameInitializing=function(){vs({status:"initializing",gameName:this.gameName})},n.gameStarted=function(){vs({status:"started",gameName:this.gameName})},n.gameCompleted=function(e){vs({status:"completed",gameName:this.gameName,score:e})},n.gamePaused=function(){vs({status:"paused",gameName:this.gameName})},n.gameResumed=function(){vs({status:"resumed",gameName:this.gameName})},n.gameError=function(e){vs({status:"error",gameName:this.gameName,error:e})},t}(o)).instance=null,us=W((cs=ps).prototype,"gameName",[gs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"speed-ludo"}}),ls=cs))||ls);e._RF.pop(),e._RF.push({},"fc7d9N+nY1LD7GuIYtu/7kA","AutoReturnToPool",void 0);var Os,Ns,Es,Rs,Is,As,Ds,Ms,Ls,Fs,ks,Gs,zs,Hs,Us,Bs,xs,Ws,Vs,Ks,js,Js,Ys,Qs=n.ccclass,Zs=n.property;bs=Qs("AutoReturnToPool"),Ss=Zs({type:S}),Cs=Zs({type:r}),bs((ws=W((Ts=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"timeToReturnToPool",ws,j(t)),K(t,"shouldDestroy",Ps,j(t)),t}V(t,e);var n=t.prototype;return n.onEnable=function(){this.scheduleOnce(this.returnToPool,this.timeToReturnToPool)},n.start=function(){},n.update=function(e){},n.returnToPool=function(){Pi.instance.returnObjectToPool(this.node),this.shouldDestroy&&this.node.destroy()},t}(o)).prototype,"timeToReturnToPool",[Ss],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),Ps=W(Ts.prototype,"shouldDestroy",[Cs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_s=Ts));e._RF.pop(),e._RF.push({},"5d221i1Q0lJuIEr17hq36uU","RoundCompleted",void 0);var qs,Xs=n.ccclass,$s=n.property;Os=Xs("RoundCompleted"),Ns=$s({type:Qa}),Es=$s({type:M}),Rs=$s({type:Qa}),Is=$s({type:M}),As=$s({type:Qa}),Ds=$s({type:M}),Ms=$s({type:M}),Ls=$s({type:M}),Fs=$s({type:g}),ks=$s({type:g}),Os((Hs=W((zs=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"winnerAvatar",Hs,j(t)),K(t,"winnerName",Us,j(t)),K(t,"mostKillsPlayerAvatar",Bs,j(t)),K(t,"mostKillsPlayerName",xs,j(t)),K(t,"mostDeathsPlayerAvatar",Ws,j(t)),K(t,"mostDeathsPlayerName",Vs,j(t)),K(t,"killsCountLabel",Ks,j(t)),K(t,"deathsCountLabel",js,j(t)),K(t,"actionsButtonContainer",Js,j(t)),K(t,"infoContainer",Ys,j(t)),t}V(t,e);var n=t.prototype;return n.onLoad=function(){e.prototype.onLoad.call(this),le.on(se.HOST_CHANGED,this.onHostChanged,this)},n.onDestroy=function(){le.off(se.HOST_CHANGED,this.onHostChanged,this)},n.Open=function(){e.prototype.Open.call(this),this.initialize()},n.Close=function(){e.prototype.Close.call(this)},n.initialize=function(){e.prototype.initialize.call(this);var t=yr.Instance._serverStateCopy.playersData.findIndex((function(e){return 1==e.finishPosition}));if(-1!=t){var n=ms.Instance.getPlayer(t);this.winnerAvatar.setAvatarFromSpriteFrame(n.GetProfileSpriteFrame()),this.winnerName.string=n.playerData.name;var i=ms.Instance.getMostKillsPlayer();this.mostKillsPlayerAvatar.setAvatarFromSpriteFrame(i.GetProfileSpriteFrame()),this.mostKillsPlayerName.string=i.playerName.string;var o=ms.Instance.getMostDeathsPlayer();this.mostDeathsPlayerAvatar.setAvatarFromSpriteFrame(o.GetProfileSpriteFrame()),this.mostDeathsPlayerName.string=o.playerName.string,this.killsCountLabel.string="Most Kills: "+i.playerData.killsCount,this.deathsCountLabel.string="Most Deaths: "+o.playerData.deathsCount,this.updateHostUI()}else console.error("no winning player")},n.updateHostUI=function(){var e=ms.Instance.isLocalUserHost(),t=ms.Instance.getHostPlayer();e?t&&(this.infoContainer.active=!1,this.actionsButtonContainer.active=!0):t&&(this.actionsButtonContainer.active=!1,this.infoContainer.getComponent(M).string="Ask "+t.playerData.name+"(Host) to play again or change game",this.infoContainer.active=!0)},n.onHostChanged=function(e){console.log("RoundCompleted: Host changed from",e.oldHostId,"to",e.newHostId),this.node.active&&this.updateHostUI()},n.onPlayAgainButtonClicked=function(){var e=Date.now();yr.Instance.miloSdk.playAgain({timestamp:e}),console.log("play again button clicked")},n.onChangeGameButtonClicked=function(){var e=Date.now();yr.Instance.miloSdk.changeGame({timestamp:e}),console.log("change game button clicked")},t}(Zo)).prototype,"winnerAvatar",[Ns],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Us=W(zs.prototype,"winnerName",[Es],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bs=W(zs.prototype,"mostKillsPlayerAvatar",[Rs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xs=W(zs.prototype,"mostKillsPlayerName",[Is],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ws=W(zs.prototype,"mostDeathsPlayerAvatar",[As],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vs=W(zs.prototype,"mostDeathsPlayerName",[Ds],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ks=W(zs.prototype,"killsCountLabel",[Ms],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),js=W(zs.prototype,"deathsCountLabel",[Ls],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Js=W(zs.prototype,"actionsButtonContainer",[Fs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ys=W(zs.prototype,"infoContainer",[ks],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gs=zs));e._RF.pop(),e._RF.push({},"9d1abQYKH1DNYq+l2yQ39gD","ScaleUICanvas",void 0);var el,tl=n.ccclass;n.property,tl("ScaleUICanvas")(qs=function(e){function t(){return e.apply(this,arguments)||this}V(t,e);var n=t.prototype;return n.onLoad=function(){this.adjustCanvasScale(),this.adjustCanvasScale()},n.adjustCanvasScale=function(){var e=this.node.getComponent(a);if(e){var t=c.getVisibleSize(),n=c.getDesignResolutionSize(),i=t.width/n.width,o=t.height/n.height,r=Math.min(i,o);e.width=n.width*r,e.height=n.height*r,B("Adjusted Canvas Scale: width="+e.width+", height="+e.height)}},t}(o));e._RF.pop(),e._RF.push({},"655cahj2ldHvLESWEYNQCnW","BotMadeMoveScreen",void 0);var nl,il,ol,rl,al,sl,ll,cl=n.ccclass;n.property,cl("BotMadeMoveScreen")(el=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._timer=0,t}V(t,e);var n=t.prototype;return n.onLoad=function(){e.prototype.onLoad.call(this),this.content.on(g.EventType.TOUCH_START,this.OnClick,this)},n.onDestroy=function(){},n.Open=function(){e.prototype.Open.call(this),this._timer=0},n.Close=function(){e.prototype.Close.call(this)},n.initHandTween=function(){},n.initialization=function(){this.initHandTween()},n.OnClick=function(){ut.Instance.sendMessage(Le.PLAYER_CAMEBACK,{}),tr.instance.CloseMenu(this.menuName)},t}(Zo));e._RF.pop(),e._RF.push({},"e2268lSVzFHS6GxgBe8Zup+","CountdownScreen",void 0);var ul,pl,hl,dl,ml,fl,gl,yl=n.ccclass,vl=n.property;nl=yl("CountdownScreen"),il=vl({type:M}),ol=vl({type:g}),nl((sl=W((al=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._countdownTween=null,K(t,"countdownText",sl,j(t)),K(t,"blackBG",ll,j(t)),t}V(t,e);var n=t.prototype;return n.onLoad=function(){e.prototype.onLoad.call(this)},n.onDestroy=function(){},n.Open=function(){e.prototype.Open.call(this),this.initialization()},n.Close=function(){e.prototype.Close.call(this),null!=this._countdownTween&&this._countdownTween.stop()},n.initCountdownTween=function(){var e=this;this.countdownText.node.active=!0,this._countdownTween=R(this.countdownText.node);for(var t=function(t){e._countdownTween.call((function(){e.countdownText.string=t.toString(),e.countdownText.node.scale=y.ONE.clone().multiplyScalar(2)})).to(1,{scale:y.ONE.clone().multiplyScalar(1)},{easing:"sineIn"})},n=3;n>=1;n--)t(n);this._countdownTween.call((function(){e.deactivateScreen()}))},n.deactivateScreen=function(){this.countdownText.string="",this.countdownText.node.active=!1,this.blackBG.active=!1},n.initialization=function(){this.initCountdownTween(),this._countdownTween.start()},t}(Zo)).prototype,"countdownText",[il],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ll=W(al.prototype,"blackBG",[ol],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rl=al));e._RF.pop(),e._RF.push({},"68c2eqJD6pCR7oPhudcGbeS","EndRoundScreen",void 0);var bl,Sl=n.ccclass,Cl=n.property;ul=Sl("EndRoundScreen"),pl=Cl({type:g}),hl=Cl({type:[Pr]}),ul((fl=W((ml=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"rotatingGlow",fl,j(t)),K(t,"leaderboardProfiles",gl,j(t)),t._shouldShowThisScreen=!1,t._optionsInitialized=!1,t._isWinner=!1,t._rotatingGlow=null,t}V(t,e);var n=t.prototype;return n.onLoad=function(){e.prototype.onLoad.call(this),lt.on(De.SERVER_ROOM_STATE_CHANGE,this.ServerStateChanged,this)},n.onDestroy=function(){lt.off(De.SERVER_ROOM_STATE_CHANGE,this.ServerStateChanged,this)},n.ServerStateChanged=function(e){if(!this._optionsInitialized){var t=new Mo;t.roomSettings&&(this._shouldShowThisScreen=t.roomSettings.show_result_screen,this._optionsInitialized=!0),t.copyFrom(e)}},n.Open=function(){this._shouldShowThisScreen&&(e.prototype.Open.call(this),console.log("Opening EndROudnScreen"),this.initialize())},n.Close=function(){e.prototype.Close.call(this),this.stopRotateGlow()},n.initialize=function(){var t=this;if(e.prototype.initialize.call(this),tr.instance.showResultScreen){for(var n=yr.Instance.getPlayersRanking(),i=n.length,o=function(e){var i=t.leaderboardProfiles[e],o=ms.Instance.players.find((function(t){return t.playerNumber==n[e].playerNumber}));i.node.active=!0,i.setPlayerData(o)},r=0;r<Math.min(i,this.leaderboardProfiles.length);r++)o(r);for(var a=i;a<this.leaderboardProfiles.length;a++)this.leaderboardProfiles[a].node.active=!1}else this.Close()},n.stopRotateGlow=function(){this._rotatingGlow&&(this._rotatingGlow.stop(),this._rotatingGlow=null)},n.rotateGlow=function(){this.stopRotateGlow(),this._rotatingGlow=R(this.rotatingGlow).by(10,{angle:360}).repeatForever().start()},n.GetDisplayName=function(e){return e.length>6?e.substring(0,6)+"..":e},t}(Zo)).prototype,"rotatingGlow",[pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gl=W(ml.prototype,"leaderboardProfiles",[hl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),dl=ml));e._RF.pop(),e._RF.push({},"9f5bbkZDvNAZb6fpjFPIpKJ","HowToPlay",void 0);var _l,Tl,wl,Pl,Ol,Nl,El,Rl,Il,Al,Dl,Ml=n.ccclass;n.property,Ml("HowToPlay")(bl=function(e){function t(){return e.apply(this,arguments)||this}V(t,e);var n=t.prototype;return n.onLoad=function(){e.prototype.onLoad.call(this)},n.onDestroy=function(){},n.Open=function(){e.prototype.Open.call(this)},n.Close=function(){e.prototype.Close.call(this)},n.initHandTween=function(){},t}(Zo));e._RF.pop(),e._RF.push({},"ced73KUkCtOOY8op1Tcl5us","InGameMenu",void 0);var Ll,Fl,kl,Gl,zl,Hl,Ul,Bl,xl,Wl,Vl,Kl=n.ccclass,jl=n.property;_l=Kl("InGameMenu"),Tl=jl({type:w}),wl=jl({type:w}),Pl=jl({type:O}),Ol=jl({type:g}),_l((Rl=W((El=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"soundOnSprite",Rl,j(t)),K(t,"soundOffSprite",Il,j(t)),K(t,"soundButton",Al,j(t)),K(t,"faqButton",Dl,j(t)),t}V(t,e);var n=t.prototype;return n.onLoad=function(){e.prototype.onLoad.call(this),lt.on(De.SERVER_ROOM_STATE_CHANGE,this.ServerStateChanged,this)},n.onDestroy=function(){lt.off(De.SERVER_ROOM_STATE_CHANGE,this.ServerStateChanged,this)},n.ServerStateChanged=function(e){},n.start=function(){},n.Open=function(){console.log("InGameMenu open called"),e.prototype.Open.call(this),this.initialize()},n.Close=function(){e.prototype.Close.call(this)},n.initialize=function(){e.prototype.initialize.call(this),this.UpdateAudioSprite(),this.soundButton.node.active=tr.instance.showMuteButton,this.faqButton.active=tr.instance.showFAQ},n.UpdateAudioSprite=function(){console.log("UpdateAudioSprite: ",bn.instance.IsAudioEnabled),"true"==bn.instance.IsAudioEnabled?this.soundButton.spriteFrame=this.soundOnSprite:this.soundButton.spriteFrame=this.soundOffSprite},n.ToggleSound=function(){bn.instance.ToggleAudio(),this.UpdateAudioSprite()},t}(Zo)).prototype,"soundOnSprite",[Tl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Il=W(El.prototype,"soundOffSprite",[wl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Al=W(El.prototype,"soundButton",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dl=W(El.prototype,"faqButton",[Ol],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nl=El));e._RF.pop(),e._RF.push({},"60724o/G9lC7okBdHEACEZz","InstructionsScreen",void 0);var Jl,Yl,Ql,Zl,ql,Xl=n.ccclass,$l=n.property;Ll=Xl("InstructionsScreen"),Fl=$l({type:g}),kl=$l({type:g}),Gl=$l({type:g}),zl=$l({type:g}),Ll((Bl=W((Ul=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"helpInstructions",Bl,j(t)),K(t,"autoMoveInstructions",xl,j(t)),K(t,"waitingForUser",Wl,j(t)),K(t,"spinner",Vl,j(t)),t._isHelpInstructionDone=!1,t._isAutoMoveInstructionDone=!1,t}V(t,e);var n=t.prototype;return n.onLoad=function(){e.prototype.onLoad.call(this),R(this.spinner).repeatForever(R().by(1,{angle:360})).start()},n.onDestroy=function(){},n.Open=function(){e.prototype.Open.call(this),this.initialization()},n.Close=function(){e.prototype.Close.call(this)},n.initialization=function(){},t}(Zo)).prototype,"helpInstructions",[Fl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xl=W(Ul.prototype,"autoMoveInstructions",[kl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wl=W(Ul.prototype,"waitingForUser",[Gl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vl=W(Ul.prototype,"spinner",[zl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Hl=Ul));e._RF.pop(),e._RF.push({},"4d0daH9piJLdaZ2RAq2R5I7","KickedOutScreen",void 0);var ec,tc,nc,ic,oc,rc=n.ccclass,ac=n.property;Jl=rc("KickedOutScreen"),Yl=ac({type:M}),Jl((ql=W((Zl=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"kickedOutLabel",ql,j(t)),t}V(t,e);var n=t.prototype;return n.onLoad=function(){e.prototype.onLoad.call(this)},n.onDestroy=function(){},n.Open=function(){e.prototype.Open.call(this),this.kickedOutLabel.string="You missed "+yr.Instance._missTurnsToKickOut+" turns. kicked out of the game!"},n.Close=function(){e.prototype.Close.call(this)},n.initHandTween=function(){},n.update=function(e){},t}(Zo)).prototype,"kickedOutLabel",[Yl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ql=Zl));e._RF.pop(),e._RF.push({},"c3d3echM4BFs4nENma52EgK","ReconnectingScreen",void 0);var sc,lc,cc,uc,pc,hc=n.ccclass,dc=n.property;ec=hc("ReconnectingScreen"),tc=dc({type:g}),ec((oc=W((ic=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"spinner",oc,j(t)),t._spinnerTween=null,t}V(t,e);var n=t.prototype;return n.onLoad=function(){e.prototype.onLoad.call(this)},n.onDestroy=function(){},n.Open=function(){e.prototype.Open.call(this),this.startSpinner()},n.Close=function(){e.prototype.Close.call(this),this.stopSpinner()},n.startSpinner=function(){this._spinnerTween=R(this.spinner).repeatForever(R().by(1,{angle:360})).start()},n.stopSpinner=function(){var e;null==(e=this._spinnerTween)||e.stop(),this._spinnerTween=null},n.initHandTween=function(){},n.initialization=function(){this.initHandTween()},t}(Zo)).prototype,"spinner",[tc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nc=ic));e._RF.pop(),e._RF.push({},"00034E5631D+I67rWVJ4JPu","TutorialScreen",void 0);var mc,fc=n.ccclass,gc=n.property;sc=fc("TutorialScreen"),lc=gc({type:g}),sc((pc=W((uc=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,K(t,"handNode",pc,j(t)),t._showHandGesture=!0,t._handAnimationTween=null,t}V(t,e);var n=t.prototype;return n.onLoad=function(){e.prototype.onLoad.call(this)},n.start=function(){},n.onDestroy=function(){},n.ServerGameOptionsReceived=function(e){this._showHandGesture=e.show_hand_gesture},n.onSelectedLane=function(){console.log("Selected lane so closing tutorial"),this.Close()},n.Open=function(){this._showHandGesture&&(e.prototype.Open.call(this),this.initialization())},n.Close=function(){e.prototype.Close.call(this),this._handAnimationTween&&this._handAnimationTween.stop()},n.handClickAnimation=function(){var e=this,t=new A;A.fromEuler(t,0,0,15);new A;A.fromEuler(t,0,0,15),this._handAnimationTween=R(this.handNode).call((function(){e.handNode.eulerAngles=y.ZERO.clone()})).delay(.2).to(.3,{rotation:t},{easing:"backOut"}).delay(.7).union().repeatForever(),this._handAnimationTween.start()},n.initialization=function(){this.handClickAnimation()},t}(Zo)).prototype,"handNode",[lc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cc=uc));e._RF.pop(),e._RF.push({},"ee05aajdW5DfYOAjDiN4GXo","WaitingScreen",void 0);var yc,vc=n.ccclass;n.property,vc("WaitingScreen")(mc=function(e){function t(){return e.apply(this,arguments)||this}V(t,e);var n=t.prototype;return n.onLoad=function(){e.prototype.onLoad.call(this)},n.onDestroy=function(){},n.Open=function(){e.prototype.Open.call(this)},n.Close=function(){e.prototype.Close.call(this)},n.initialize=function(){e.prototype.initialize.call(this)},t}(Zo));e._RF.pop(),e._RF.push({},"79859f2JIJNtZdtajk99tGI","ILudoRoomSettings",void 0),e._RF.pop(),e._RF.push({},"52b052wwelCkqAQSO8EA9kj","TestScript",void 0);var bc=n.ccclass;n.property,bc("NewComponent")(yc=function(e){function t(){return e.apply(this,arguments)||this}V(t,e);var n=t.prototype;return n.start=function(){},n.update=function(e){},t}(o));e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/ludo_game', 'chunks:///ludo_game.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});